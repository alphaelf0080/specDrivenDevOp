<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Dump Tool ç³»çµ±æ¶æ§‹èªªæ˜</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.0/dist/mermaid.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --info-color: #8e44ad;
            --light-bg: #ecf0f1;
            --dark-bg: #34495e;
            --text-color: #2c3e50;
            --border-color: #bdc3c7;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: var(--gradient-primary);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header h1 {
            color: var(--primary-color);
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            background: var(--gradient-secondary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header .subtitle {
            color: #7f8c8d;
            font-size: 1.3em;
            font-weight: 300;
            margin-bottom: 20px;
        }
        
        /* Navigation */
        .nav {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            position: sticky;
            top: 20px;
            z-index: 100;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        
        .nav a {
            text-decoration: none;
            color: var(--primary-color);
            padding: 10px 20px;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-weight: 500;
            border: 2px solid transparent;
        }
        
        .nav a:hover {
            background: var(--gradient-primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        /* Cards */
        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .card h2 {
            color: var(--primary-color);
            font-size: 2.2em;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--secondary-color);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .card h3 {
            color: var(--secondary-color);
            font-size: 1.5em;
            margin: 25px 0 15px 0;
            padding-left: 15px;
            border-left: 4px solid var(--secondary-color);
        }
        
        .card h4 {
            color: var(--info-color);
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }
        
        /* Icons */
        .icon {
            font-size: 1.2em;
            margin-right: 10px;
        }
        
        /* Mermaid diagrams */
        .mermaid {
            text-align: center;
            margin: 30px 0;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        /* Code blocks */
        .code-container {
            position: relative;
            margin: 20px 0;
        }
        
        .code-header {
            background: var(--dark-bg);
            color: white;
            padding: 10px 20px;
            border-radius: 10px 10px 0 0;
            font-weight: 500;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        pre[class*="language-"] {
            margin: 0 !important;
            border-radius: 0 0 10px 10px !important;
            box-shadow: var(--shadow);
        }
        
        /* Tables */
        .table-container {
            overflow-x: auto;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
        }
        
        th {
            background: var(--gradient-primary);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        /* Feature grids */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .feature-item {
            background: var(--gradient-success);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }
        
        .feature-item:hover {
            transform: translateY(-5px);
        }
        
        .feature-item h4 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        /* Architecture components */
        .arch-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .arch-component {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
            border-left: 5px solid var(--secondary-color);
            transition: all 0.3s ease;
        }
        
        .arch-component:hover {
            transform: translateX(5px);
            border-left-color: var(--accent-color);
        }
        
        .arch-component h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .arch-component ul {
            margin-left: 20px;
        }
        
        .arch-component li {
            margin: 5px 0;
            color: #666;
        }
        
        /* Process steps */
        .process-flow {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
            justify-content: center;
        }
        
        .process-step {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
            text-align: center;
            min-width: 200px;
            position: relative;
        }
        
        .process-step::after {
            content: 'â†’';
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5em;
            color: var(--secondary-color);
        }
        
        .process-step:last-child::after {
            display: none;
        }
        
        .step-number {
            background: var(--gradient-primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin: 0 auto 15px auto;
        }
        
        /* Alert boxes */
        .alert {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid var(--info-color);
        }

        /* åœ–ç‰‡å’Œå½±ç‰‡æ¨£å¼ */
        .media-container {
            text-align: center;
            margin: 20px 0;
        }
        
        .media-container img,
        .media-container video {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 10px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .media-container img:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }
        
        .media-container video {
            border-radius: 12px;
            max-height: 70vh;
        }
        
        .media-caption {
            margin-top: 10px;
            color: #666;
            font-style: italic;
            font-size: 0.9em;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .media-container img,
            .media-container video {
                margin: 5px;
                border-radius: 6px;
            }
        }
            border-left: 5px solid;
        }
        
        .alert-info {
            background: #e8f4f8;
            border-color: var(--info-color);
            color: #5a5a5a;
        }
        
        .alert-warning {
            background: #fef9e7;
            border-color: var(--warning-color);
            color: #5a5a5a;
        }
        
        .alert-success {
            background: #e8f5e8;
            border-color: var(--success-color);
            color: #5a5a5a;
        }
        
        .alert-danger {
            background: #ffeaea;
            border-color: var(--accent-color);
            color: #5a5a5a;
        }
        
        /* Technology stack */
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .tech-item {
            background: white;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            box-shadow: var(--shadow);
            border-top: 3px solid var(--secondary-color);
        }
        
        .tech-item h5 {
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .tech-item .version {
            color: var(--success-color);
            font-weight: bold;
        }
        
        .tech-item .purpose {
            color: #666;
            font-size: 0.9em;
        }
        
        /* API endpoints */
        .api-endpoint {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: var(--shadow);
            border-left: 5px solid var(--success-color);
        }
        
        .api-method {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            font-size: 0.8em;
            margin-right: 10px;
        }
        
        .api-method.get {
            background: var(--success-color);
        }
        
        .api-method.post {
            background: var(--info-color);
        }
        
        .api-method.ws {
            background: var(--warning-color);
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .feature-grid,
            .arch-grid {
                grid-template-columns: 1fr;
            }
            
            .process-flow {
                flex-direction: column;
                align-items: center;
            }
            
            .process-step::after {
                content: 'â†“';
                right: 50%;
                top: 100%;
                transform: translateX(50%);
            }
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Loading animation for mermaid */
        .mermaid-loading {
            text-align: center;
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ—ï¸ Game Dump Tool ç³»çµ±æ¶æ§‹èªªæ˜</h1>
            <p class="subtitle">åˆ†æ•£å¼éŠæˆ²æ•¸æ“šæ”¶é›†èˆ‡åˆ†æç³»çµ±</p>
            <div class="alert alert-info">
                <strong>ç³»çµ±æ¦‚è¿°ï¼š</strong>åŸºæ–¼ Chrome Extension + Python å¾Œç«¯çš„æ¨¡çµ„åŒ–æ¶æ§‹ï¼Œå°ˆç‚º PG Slot éŠæˆ²æ•¸æ“šæ”¶é›†è¨­è¨ˆ
            </div>
        </div>

        <!-- Navigation -->
        <nav class="nav">
            <ul>
                <li><a href="#overview">ğŸ¯ æ¶æ§‹æ¦‚è¦½</a></li>
                <li><a href="#components">ğŸ”§ ç³»çµ±çµ„ä»¶</a></li>
                <li><a href="#dataflow">ğŸ“Š æ•¸æ“šæµç¨‹</a></li>
                <li><a href="#tech-stack">ğŸ’» æŠ€è¡“æ¶æ§‹</a></li>
                <li><a href="#modules">ğŸ§© æ¨¡çµ„è¨­è¨ˆ</a></li>
                <li><a href="#api">ğŸ”— API è¨­è¨ˆ</a></li>
                <li><a href="#database">ğŸ—„ï¸ è³‡æ–™åº«æ¶æ§‹</a></li>
                <li><a href="#security">ğŸ”’ å®‰å…¨æ€§è¨­è¨ˆ</a></li>
                <li><a href="#scalability">ğŸ“ˆ æ“´å±•æ€§è¨­è¨ˆ</a></li>
                <li><a href="#demo">ğŸ¬ ç³»çµ±æ¼”ç¤º</a></li>
            </ul>
        </nav>

        <!-- Architecture Overview -->
        <div class="card" id="overview">
            <h2><span class="icon">ğŸ¯</span>æ¶æ§‹æ¦‚è¦½</h2>
            
            <h3>æ ¸å¿ƒè¨­è¨ˆç†å¿µ</h3>
            <div class="feature-grid">
                <div class="feature-item">
                    <h4>ğŸ”„ åˆ†é›¢é—œæ³¨é»</h4>
                    <p>å‰ç«¯è² è²¬æ•¸æ“šæ”¶é›†ï¼Œå¾Œç«¯è² è²¬æ•¸æ“šè™•ç†å’Œå­˜å„²</p>
                </div>
                <div class="feature-item">
                    <h4>âš¡ å³æ™‚é€šè¨Š</h4>
                    <p>ä½¿ç”¨ WebSocket å¯¦ç¾ä½å»¶é²çš„é›™å‘é€šè¨Š</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ§© æ¨¡çµ„åŒ–è¨­è¨ˆ</h4>
                    <p>å„çµ„ä»¶ç¨ç«‹é‹è¡Œï¼Œæ˜“æ–¼ç¶­è­·å’Œæ“´å±•</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ›¡ï¸ å®¹éŒ¯è™•ç†</h4>
                    <p>å¤šå±¤æ¬¡çš„éŒ¯èª¤è™•ç†å’Œè‡ªå‹•æ¢å¾©æ©Ÿåˆ¶</p>
                </div>
            </div>

            <h3>æ•´é«”æ¶æ§‹åœ–</h3>
            <div class="mermaid">
graph TD
    A[PG Slot Game Website] --> B[Chrome Extension]
    B --> C[Content Script]
    B --> D[Background Script]
    B --> E[Popup Interface]
    C --> F[Injected Script]
    
    G[HTTP API]
    H[WebSocket]
    
    I[Python Proxy Server]
    I --> J[Game Data Processor]
    I --> K[Database Manager]
    I --> L[WebSocket Handler]
    I --> M[HTTP API Handler]
    
    N[PostgreSQL Database]
    O[Game Data Tables]
    P[Provider Registry]
    Q[Game Registry]
    
    B --> G
    B --> H
    G --> I
    H --> I
    K --> N
    N --> O
    N --> P
    N --> Q
            </div>

            <h3>ç³»çµ±å¯¦éš›æˆªåœ–</h3>
            <div class="media-container">
                <img src="gameDump_extension_screenShot.png" alt="Game Dump Extension æˆªåœ–" style="width: 70%; max-width: 70%;">
                <p class="media-caption">Game Dump Extension Chrome æ“´å±•ä»‹é¢</p>
            </div>
        </div>

        <!-- System Components -->
        <div class="card" id="components">
            <h2><span class="icon">ğŸ”§</span>ç³»çµ±çµ„ä»¶</h2>
            
            <h3>1. å‰ç«¯çµ„ä»¶ (Chrome Extension)</h3>
            <div class="arch-grid">
                <div class="arch-component">
                    <h4>Background Script</h4>
                    <ul>
                        <li>ç®¡ç† WebSocket é€£æ¥ç”Ÿå‘½é€±æœŸ</li>
                        <li>è™•ç†èˆ‡å¾Œç«¯ä¼ºæœå™¨çš„é€šè¨Š</li>
                        <li>å”èª¿ä¸åŒè…³æœ¬é–“çš„æ¶ˆæ¯å‚³é</li>
                        <li>ç¶­è­·æ“´å±•çš„å…¨åŸŸç‹€æ…‹</li>
                    </ul>
                </div>
                <div class="arch-component">
                    <h4>Content Script</h4>
                    <ul>
                        <li>åœ¨ç¶²é ç’°å¢ƒä¸­é‹è¡ŒåŸ·è¡Œ</li>
                        <li>æ³¨å…¥è‡ªè¨‚è…³æœ¬åˆ°éŠæˆ²é é¢</li>
                        <li>è™•ç†éµç›¤äº‹ä»¶æ¨¡æ“¬</li>
                        <li>èˆ‡ injected script é€²è¡Œè¨Šæ¯å‚³é</li>
                    </ul>
                </div>
                <div class="arch-component">
                    <h4>Injected Script</h4>
                    <ul>
                        <li>åœ¨ç¶²é  JavaScript ç’°å¢ƒåŸ·è¡Œ</li>
                        <li>æ””æˆªéŠæˆ² API è«‹æ±‚å’ŒéŸ¿æ‡‰</li>
                        <li>æå–éŠæˆ²ç‹€æ…‹å’Œçµæœæ•¸æ“š</li>
                        <li>èˆ‡ content script é€šè¨Šå‚³éæ•¸æ“š</li>
                    </ul>
                </div>
                <div class="arch-component">
                    <h4>Popup Interface</h4>
                    <ul>
                        <li>æä¾›ä½¿ç”¨è€…æ“ä½œä»‹é¢</li>
                        <li>é¡¯ç¤ºé€£æ¥ç‹€æ…‹å’Œæ”¶é›†é€²åº¦</li>
                        <li>é…ç½®æ”¶é›†åƒæ•¸</li>
                        <li>æ§åˆ¶æ•¸æ“šæ”¶é›†çš„é–‹å§‹å’Œåœæ­¢</li>
                    </ul>
                </div>
            </div>

            <h3>æª”æ¡ˆçµæ§‹åœ–</h3>
            <div class="code-container">
                <div class="code-header">
                    <span>ğŸ“</span> Chrome Extension æª”æ¡ˆçµæ§‹
                </div>
                <pre><code class="language-text">dumpExtension/
â”œâ”€â”€ manifest.json          # æ“´å±•é…ç½®æ¸…å–®
â”œâ”€â”€ config.js              # çµ±ä¸€é…ç½®ç®¡ç†
â”œâ”€â”€ background.js           # èƒŒæ™¯æœå‹™è…³æœ¬
â”œâ”€â”€ popup.js               # å½ˆå‡ºä»‹é¢è…³æœ¬
â”œâ”€â”€ popup.html             # å½ˆå‡ºä»‹é¢ HTML
â”œâ”€â”€ content.js             # å…§å®¹è…³æœ¬
â”œâ”€â”€ injected.js            # æ³¨å…¥è…³æœ¬
â”œâ”€â”€ utils/                 # å·¥å…·æ¨¡çµ„
â”‚   â”œâ”€â”€ websocket-manager.js
â”‚   â”œâ”€â”€ data-sync-manager.js
â”‚   â””â”€â”€ utils.js
â””â”€â”€ icons/                 # åœ–ç¤ºè³‡æº</code></pre>
            </div>

            <h3>2. å¾Œç«¯çµ„ä»¶ (Python Proxy Server)</h3>
            <div class="arch-grid">
                <div class="arch-component">
                    <h4>GameDumpServer</h4>
                    <ul>
                        <li>ä¸»ä¼ºæœå™¨é¡ï¼Œæ•´åˆæ‰€æœ‰çµ„ä»¶</li>
                        <li>ç®¡ç† HTTP å’Œ WebSocket æœå‹™</li>
                        <li>å”èª¿å„å€‹è™•ç†å™¨çš„å·¥ä½œ</li>
                    </ul>
                </div>
                <div class="arch-component">
                    <h4>GameDumpState</h4>
                    <ul>
                        <li>éŠæˆ²æ•¸æ“šè½‰å„²ç‹€æ…‹ç®¡ç†</li>
                        <li>ç¶­è­·æ”¶é›†é€²åº¦å’Œé…ç½®</li>
                        <li>æä¾›ç‹€æ…‹åºåˆ—åŒ–åŠŸèƒ½</li>
                    </ul>
                </div>
                <div class="arch-component">
                    <h4>DatabaseManager</h4>
                    <ul>
                        <li>è³‡æ–™åº«é€£æ¥ç®¡ç†</li>
                        <li>æä¾›å®‰å…¨çš„è³‡æ–™åº«æ“ä½œ</li>
                        <li>è™•ç†é€£æ¥æ± å’Œäº‹å‹™</li>
                    </ul>
                </div>
                <div class="arch-component">
                    <h4>GameDataProcessor</h4>
                    <ul>
                        <li>éŠæˆ²æ•¸æ“šè™•ç†å’Œé©—è­‰</li>
                        <li>æ•¸æ“šæ ¼å¼è½‰æ›</li>
                        <li>æ¥­å‹™é‚è¼¯è™•ç†</li>
                    </ul>
                </div>
            </div>

            <h3>å¾Œç«¯æª”æ¡ˆçµæ§‹</h3>
            <div class="code-container">
                <div class="code-header">
                    <span>ğŸ</span> Python å¾Œç«¯æª”æ¡ˆçµæ§‹
                </div>
                <pre><code class="language-text">pythonProxyServer/
â”œâ”€â”€ proxy_refactored.py         # ä¸»ä¼ºæœå™¨ç¨‹å¼
â”œâ”€â”€ pg_oper_module.py          # è³‡æ–™åº«æ“ä½œæ¨¡çµ„
â”œâ”€â”€ start_server.py            # å•Ÿå‹•è…³æœ¬
â”œâ”€â”€ config.json                # é…ç½®æª”æ¡ˆ
â”œâ”€â”€ test_refactored.py         # æ¸¬è©¦è…³æœ¬
â””â”€â”€ å„ç¨®åˆ†æå·¥å…·è…³æœ¬...</code></pre>
            </div>
        </div>

        <!-- Data Flow -->
        <div class="card" id="dataflow">
            <h2><span class="icon">ğŸ“Š</span>æ•¸æ“šæµç¨‹</h2>
            
            <h3>1. æ•¸æ“šæ”¶é›†æµç¨‹</h3>
            <div class="mermaid">
sequenceDiagram
    participant Game as PG Slot Game
    participant Inject as Injected Script
    participant Content as Content Script
    participant BG as Background Script
    participant Server as Python Server
    participant DB as PostgreSQL
    
    Game->>Inject: API Request Response
    Inject->>Inject: Data Parsing
    Inject->>Content: postMessage
    Content->>BG: runtime sendMessage
    BG->>Server: WebSocket Send
    Server->>Server: Data Processing
    Server->>DB: Store Data
    DB->>Server: Confirm Storage
    Server->>BG: Result
    BG->>Content: Status Update
    Content->>Inject: Continue
            </div>

            <h3>2. é…ç½®åŒæ­¥æµç¨‹</h3>
            <div class="mermaid">
sequenceDiagram
    participant Popup as Popup Interface
    participant BG as Background Script
    participant Server as Python Server
    participant DB as PostgreSQL
    
    Popup->>BG: Set Configuration
    BG->>Server: HTTP POST Config
    Server->>Server: Validate Config
    Server->>DB: Query Game Info
    DB->>Server: Game Information
    Server->>BG: Config Confirmation
    BG->>Popup: Status Update
            </div>

            <h3>3. è‡ªå‹•æ“ä½œæµç¨‹</h3>
            <div class="mermaid">
flowchart TD
    A[Start Collection] --> B{Check Game Status}
    B -->|Game Ready| C[Execute Betting Operation]
    B -->|Game Not Ready| D[Wait for Game Loading]
    C --> E[Intercept API Response]
    E --> F[Parse Game Results]
    F --> G[Send Data to Server]
    G --> H{Check Collection Count}
    H -->|Target Not Reached| I[Wait Interval Time]
    H -->|Target Reached| J[End Collection]
    I --> C
    D --> B
            </div>

            <h3>æ•¸æ“šè™•ç†æ­¥é©Ÿ</h3>
            <div class="process-flow">
                <div class="process-step">
                    <div class="step-number">1</div>
                    <h4>API æ””æˆª</h4>
                    <p>æ•ç²éŠæˆ² API è«‹æ±‚å’ŒéŸ¿æ‡‰</p>
                </div>
                <div class="process-step">
                    <div class="step-number">2</div>
                    <h4>æ•¸æ“šè§£æ</h4>
                    <p>æå–é—œéµéŠæˆ²ä¿¡æ¯</p>
                </div>
                <div class="process-step">
                    <div class="step-number">3</div>
                    <h4>æ ¼å¼è½‰æ›</h4>
                    <p>è½‰æ›ç‚ºæ¨™æº–æ•¸æ“šæ ¼å¼</p>
                </div>
                <div class="process-step">
                    <div class="step-number">4</div>
                    <h4>æ•¸æ“šé©—è­‰</h4>
                    <p>æª¢æŸ¥æ•¸æ“šå®Œæ•´æ€§å’Œæœ‰æ•ˆæ€§</p>
                </div>
                <div class="process-step">
                    <div class="step-number">5</div>
                    <h4>å­˜å„²è™•ç†</h4>
                    <p>å­˜å…¥ PostgreSQL è³‡æ–™åº«</p>
                </div>
            </div>
        </div>

        <!-- Tech Stack -->
        <div class="card" id="tech-stack">
            <h2><span class="icon">ğŸ’»</span>æŠ€è¡“æ¶æ§‹</h2>
            
            <h3>å‰ç«¯æŠ€è¡“æ£§</h3>
            <div class="tech-stack">
                <div class="tech-item">
                    <h5>Chrome Extension API</h5>
                    <div class="version">Manifest V3</div>
                    <div class="purpose">æ“´å±•æ¡†æ¶</div>
                </div>
                <div class="tech-item">
                    <h5>JavaScript</h5>
                    <div class="version">ES6+</div>
                    <div class="purpose">ä¸»è¦ç¨‹å¼èªè¨€</div>
                </div>
                <div class="tech-item">
                    <h5>WebSocket API</h5>
                    <div class="version">-</div>
                    <div class="purpose">å³æ™‚é€šè¨Š</div>
                </div>
                <div class="tech-item">
                    <h5>Fetch API</h5>
                    <div class="version">-</div>
                    <div class="purpose">HTTP è«‹æ±‚</div>
                </div>
            </div>

            <h3>å¾Œç«¯æŠ€è¡“æ£§</h3>
            <div class="tech-stack">
                <div class="tech-item">
                    <h5>Python</h5>
                    <div class="version">3.8+</div>
                    <div class="purpose">ä¸»è¦ç¨‹å¼èªè¨€</div>
                </div>
                <div class="tech-item">
                    <h5>Flask</h5>
                    <div class="version">2.0+</div>
                    <div class="purpose">HTTP API æ¡†æ¶</div>
                </div>
                <div class="tech-item">
                    <h5>websockets</h5>
                    <div class="version">10.0+</div>
                    <div class="purpose">WebSocket ä¼ºæœå™¨</div>
                </div>
                <div class="tech-item">
                    <h5>psycopg2</h5>
                    <div class="version">2.9+</div>
                    <div class="purpose">PostgreSQL é©…å‹•</div>
                </div>
            </div>

            <h3>è³‡æ–™åº«æŠ€è¡“</h3>
            <div class="tech-stack">
                <div class="tech-item">
                    <h5>PostgreSQL</h5>
                    <div class="version">12.0+</div>
                    <div class="purpose">ä¸»è¦è³‡æ–™åº«</div>
                </div>
                <div class="tech-item">
                    <h5>JSON</h5>
                    <div class="version">-</div>
                    <div class="purpose">åŠçµæ§‹åŒ–æ•¸æ“š</div>
                </div>
                <div class="tech-item">
                    <h5>SQL</h5>
                    <div class="version">-</div>
                    <div class="purpose">æ•¸æ“šæŸ¥è©¢èªè¨€</div>
                </div>
            </div>
        </div>

        <!-- Modules -->
        <div class="card" id="modules">
            <h2><span class="icon">ğŸ§©</span>æ¨¡çµ„è¨­è¨ˆ</h2>
            
            <h3>å‰ç«¯æ¨¡çµ„æ¶æ§‹</h3>
            <div class="code-container">
                <div class="code-header">
                    <span>âš™ï¸</span> é…ç½®ç®¡ç†æ¨¡çµ„ (config.js)
                </div>
                <pre><code class="language-javascript">const CONFIG = {
    SERVER: {
        HTTP_HOST: 'http://localhost:8080',
        WS_HOST: 'ws://localhost:8081'
    },
    DEFAULTS: {
        TOTAL_DUMP_COUNT: 5,
        TIME_STEP: 2,
        SPIN_INTERVAL: 3500
    },
    MESSAGE_TYPES: {
        REFRESH: 'refresh',
        TO_BACKGROUND: 'toBK',
        BUTTON_CLICKED: 'button_clicked'
    }
};</code></pre>
            </div>

            <div class="code-container">
                <div class="code-header">
                    <span>ğŸ”Œ</span> WebSocket ç®¡ç†å™¨
                </div>
                <pre><code class="language-javascript">class WebSocketManager {
    constructor(url, options = {}) {
        this.url = url;
        this.options = {
            maxReconnectAttempts: 10,
            reconnectInterval: 5000,
            heartbeatInterval: 2000,
            ...options
        };
        this.socket = null;
        this.reconnectAttempts = 0;
    }
    
    connect() {
        return new Promise((resolve, reject) => {
            this.socket = new WebSocket(this.url);
            // è¨­å®šäº‹ä»¶è™•ç†å™¨
            this.socket.onopen = this.handleOpen.bind(this);
            this.socket.onmessage = this.handleMessage.bind(this);
            this.socket.onclose = this.handleClose.bind(this);
            this.socket.onerror = this.handleError.bind(this);
        });
    }
}</code></pre>
            </div>

            <h3>å¾Œç«¯æ¨¡çµ„æ¶æ§‹</h3>
            <div class="code-container">
                <div class="code-header">
                    <span>ğŸ®</span> éŠæˆ²æ•¸æ“šè™•ç†å™¨
                </div>
                <pre><code class="language-python">class GameDataProcessor:
    """éŠæˆ²æ•¸æ“šè™•ç†å™¨"""
    def __init__(self, db_manager: DatabaseManager, state: GameDumpState):
        self.db = db_manager
        self.state = state
    
    def process_spin_result(self, spin_data: Dict) -> Dict:
        """è™•ç†æ—‹è½‰çµæœæ•¸æ“š"""
        # æ•¸æ“šé©—è­‰ã€è½‰æ›ã€å­˜å„²é‚è¼¯
        pass
    
    def get_provider_info(self, origin: str) -> Dict:
        """ç²å–ä¾›æ‡‰å•†ä¿¡æ¯"""
        # æŸ¥è©¢ä¾›æ‡‰å•†è¨»å†Šè¡¨
        pass</code></pre>
            </div>

            <div class="code-container">
                <div class="code-header">
                    <span>ğŸ—„ï¸</span> è³‡æ–™åº«ç®¡ç†å™¨
                </div>
                <pre><code class="language-python">class DatabaseManager:
    """è³‡æ–™åº«ç®¡ç†å™¨"""
    def __init__(self, config: DatabaseConfig):
        self.config = config
        self.connection = None
        self.pg_oper = None
        self.connect()
    
    def connect(self):
        """å»ºç«‹è³‡æ–™åº«é€£æ¥"""
        self.connection = psycopg2.connect(
            database=self.config.db_name,
            user=self.config.db_user,
            password=self.config.db_password,
            host=self.config.db_host,
            port=self.config.db_port
        )
        self.pg_oper = pg_oper(self.connection)</code></pre>
            </div>
        </div>

        <!-- API Design -->
        <div class="card" id="api">
            <h2><span class="icon">ğŸ”—</span>API è¨­è¨ˆ</h2>
            
            <h3>HTTP API ç«¯é»</h3>
            
            <div class="api-endpoint">
                <span class="api-method get">GET</span>
                <strong>/status</strong> - ä¼ºæœå™¨ç‹€æ…‹æŸ¥è©¢
                <div class="code-container" style="margin-top: 15px;">
                    <pre><code class="language-json">{
    "status": "running",
    "timestamp": "2024-01-01T12:00:00Z",
    "version": "1.0.6"
}</code></pre>
                </div>
            </div>

            <div class="api-endpoint">
                <span class="api-method post">POST</span>
                <strong>/sendCurrentUrl</strong> - æ¥æ”¶ç•¶å‰éŠæˆ² URL
                <div class="code-container" style="margin-top: 15px;">
                    <div class="code-header">Request</div>
                    <pre><code class="language-json">{
    "url": "https://m.pgsoft-games.com/game",
    "origin": "m.pgsoft-games.com"
}</code></pre>
                </div>
                <div class="code-container">
                    <div class="code-header">Response</div>
                    <pre><code class="language-json">{
    "success": true,
    "message": "URL processed successfully",
    "data": {
        "providerInfo": [...],
        "gameInfo": {...}
    }
}</code></pre>
                </div>
            </div>

            <div class="api-endpoint">
                <span class="api-method post">POST</span>
                <strong>/sentCurrentSettingToServer</strong> - æ¥æ”¶éŠæˆ²è¨­å®š
                <div class="code-container" style="margin-top: 15px;">
                    <div class="code-header">Request</div>
                    <pre><code class="language-json">{
    "dumpSeed": "test_seed_001",
    "maxDumpCount": 100,
    "gameKey": "wild_bounty"
}</code></pre>
                </div>
            </div>

            <div class="api-endpoint">
                <span class="api-method post">POST</span>
                <strong>/sendSpinRes</strong> - æ¥æ”¶æ—‹è½‰çµæœæ•¸æ“š
                <div class="code-container" style="margin-top: 15px;">
                    <div class="code-header">Request</div>
                    <pre><code class="language-json">{
    "currentSpinCount": 1,
    "maxSpinCount": 100,
    "spinRes": {
        "dt": {
            "si": {
                "tw": 1000,
                "tb": 400,
                "rl": [1,2,3,4,5]
            }
        }
    }
}</code></pre>
                </div>
            </div>

            <h3>WebSocket API è¨­è¨ˆ</h3>
            <div class="api-endpoint">
                <span class="api-method ws">WS</span>
                <strong>ws://localhost:8081</strong> - WebSocket é€£æ¥ç«¯é»
                <div class="code-container" style="margin-top: 15px;">
                    <div class="code-header">è¨Šæ¯æ ¼å¼</div>
                    <pre><code class="language-json">{
    "type": "message_type",
    "timestamp": "2024-01-01T12:00:00Z",
    "data": {
        "key": "value"
    }
}</code></pre>
                </div>
            </div>

            <div class="alert alert-info">
                <strong>æ”¯æ´çš„è¨Šæ¯é¡å‹ï¼š</strong>
                <ul style="margin-top: 10px;">
                    <li><code>listen</code> - é–‹å§‹ç›£è½</li>
                    <li><code>sentReqSet</code> - ç™¼é€è¨­å®š</li>
                    <li><code>sentGameURL</code> - ç™¼é€éŠæˆ² URL</li>
                    <li><code>spinRes</code> - ç™¼é€æ—‹è½‰çµæœ</li>
                    <li><code>gameInfo</code> - ç™¼é€éŠæˆ²ä¿¡æ¯</li>
                </ul>
            </div>
        </div>

        <!-- Database Architecture -->
        <div class="card" id="database">
            <h2><span class="icon">ğŸ—„ï¸</span>è³‡æ–™åº«æ¶æ§‹</h2>
            
            <h3>PostgreSQL è³‡æ–™åº«æ¦‚è¦½</h3>
            <div class="media-container">
                <img src="postgreSQL_DB.png" alt="PostgreSQL è³‡æ–™åº«çµæ§‹" style="width: 50%; max-width: 50%;">
                <p class="media-caption">PostgreSQL è³‡æ–™åº«æ•´é«”æ¶æ§‹</p>
            </div>
            
            <h3>ä¸»è¦è³‡æ–™è¡¨</h3>
            <div class="media-container">
                <img src="game_reg_table.png" alt="éŠæˆ²è¨»å†Šè¡¨">
                <p class="media-caption">éŠæˆ²è¨»å†Šè¡¨ (game_reg) çµæ§‹</p>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>è³‡æ–™è¡¨</th>
                            <th>ç”¨é€”</th>
                            <th>ä¸»è¦æ¬„ä½</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>provider_reg</strong></td>
                            <td>ä¾›æ‡‰å•†è¨»å†Šè¡¨</td>
                            <td>id, provider_name, host, config</td>
                        </tr>
                        <tr>
                            <td><strong>game_reg</strong></td>
                            <td>éŠæˆ²è¨»å†Šè¡¨</td>
                            <td>id, game_name, game_key, table_name</td>
                        </tr>
                        <tr>
                            <td><strong>tb_pg_*_v1_001</strong></td>
                            <td>éŠæˆ²æ•¸æ“šè¡¨ï¼ˆå‹•æ…‹å‰µå»ºï¼‰</td>
                            <td>index, tw, tb, rl, gm, raw_data</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>è³‡æ–™é—œè¯åœ–</h3>
            <div class="mermaid">
graph TD
    A[PROVIDER_REG<br/>Provider Registry<br/>id, provider_name, host]
    B[GAME_REG<br/>Game Registry<br/>id, game_name, game_key]
    C[GAME_DATA_TABLES<br/>Game Data Tables<br/>index, tw, tb, rl, gm]
    
    A -->|has| B
    B -->|generates| C
            </div>

            <h3>éŠæˆ²æ•¸æ“šè¡¨çµæ§‹</h3>
            <div class="media-container">
                <img src="gameRecord_wildBounty_table.png" alt="Wild Bounty éŠæˆ²æ•¸æ“šè¡¨">
                <p class="media-caption">Wild Bounty éŠæˆ²æ•¸æ“šè¡¨å¯¦éš›çµæ§‹</p>
            </div>
            
            <div class="code-container">
                <div class="code-header">
                    <span>ğŸ“Š</span> SQL è¡¨æ ¼å®šç¾©
                </div>
                <pre><code class="language-sql">-- ç¯„ä¾‹ï¼štb_pg_wild_bounty_v1_001
CREATE TABLE tb_pg_wild_bounty_v1_001 (
    index SERIAL PRIMARY KEY,
    sn INTEGER NOT NULL,
    dump_seed VARCHAR(255),
    game_name VARCHAR(255),
    bet_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    tw INTEGER,              -- Total Win
    tb INTEGER,              -- Total Bet
    rl JSONB,               -- Reel Layout
    gm INTEGER,             -- Game Mode
    ml INTEGER,             -- Max Lines
    mrl JSONB,              -- Max Reel Layout
    orl JSONB,              -- Original Reel Layout
    is_free_game BOOLEAN DEFAULT FALSE,
    multiplier INTEGER DEFAULT 1,
    raw_data JSONB          -- å®Œæ•´çš„åŸå§‹æ•¸æ“š
);

-- å»ºç«‹ç´¢å¼•ä»¥å„ªåŒ–æŸ¥è©¢æ•ˆèƒ½
CREATE INDEX idx_dump_seed ON tb_pg_wild_bounty_v1_001(dump_seed);
CREATE INDEX idx_bet_time ON tb_pg_wild_bounty_v1_001(bet_time);
CREATE INDEX idx_game_mode ON tb_pg_wild_bounty_v1_001(gm);</code></pre>
            </div>
        </div>

        <!-- Security -->
        <div class="card" id="security">
            <h2><span class="icon">ğŸ”’</span>å®‰å…¨æ€§è¨­è¨ˆ</h2>
            
            <div class="feature-grid">
                <div class="feature-item">
                    <h4>ğŸ›¡ï¸ è¼¸å…¥é©—è­‰</h4>
                    <p>SQL æ³¨å…¥é˜²è­·ã€XSS é˜²è­·ã€æ•¸æ“šé¡å‹é©—è­‰</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ” é€£æ¥å®‰å…¨</h4>
                    <p>CORS é…ç½®ã€WebSocket é©—è­‰ã€SSL/TLS æ”¯æ´</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ—ƒï¸ è³‡æ–™åº«å®‰å…¨</h4>
                    <p>æœ€å°æ¬Šé™åŸå‰‡ã€é€£æ¥åŠ å¯†ã€å‚™ä»½ç­–ç•¥</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ“ æ—¥èªŒç›£æ§</h4>
                    <p>æ“ä½œæ—¥èªŒã€éŒ¯èª¤è¿½è¹¤ã€ç•°å¸¸è­¦å ±</p>
                </div>
            </div>

            <h3>è¼¸å…¥é©—è­‰ç¯„ä¾‹</h3>
            <div class="code-container">
                <div class="code-header">
                    <span>ğŸ”</span> Python è¼¸å…¥é©—è­‰
                </div>
                <pre><code class="language-python">def validate_input(data):
    """è¼¸å…¥é©—è­‰ç¯„ä¾‹"""
    if not isinstance(data, dict):
        raise ValueError("Invalid data format")
    
    # æª¢æŸ¥å¿…è¦æ¬„ä½
    required_fields = ['dump_seed', 'spin_count']
    for field in required_fields:
        if field not in data:
            raise ValueError(f"Missing required field: {field}")
    
    # æ•¸æ“šé¡å‹é©—è­‰
    if not isinstance(data['spin_count'], int) or data['spin_count'] <= 0:
        raise ValueError("Invalid spin count")
    
    return True</code></pre>
            </div>

            <div class="alert alert-warning">
                <strong>âš ï¸ å®‰å…¨æ³¨æ„äº‹é …ï¼š</strong>
                <ul style="margin-top: 10px;">
                    <li>å®šæœŸæ›´æ–°ä¾è³´å¥—ä»¶ç‰ˆæœ¬</li>
                    <li>ä½¿ç”¨å¼·å¯†ç¢¼å’ŒåŠ å¯†é€£æ¥</li>
                    <li>é™åˆ¶ API è¨ªå•é »ç‡</li>
                    <li>ç›£æ§ç•°å¸¸è¨ªå•æ¨¡å¼</li>
                </ul>
            </div>
        </div>

        <!-- Scalability -->
        <div class="card" id="scalability">
            <h2><span class="icon">ğŸ“ˆ</span>æ“´å±•æ€§è¨­è¨ˆ</h2>
            
            <h3>æ°´å¹³æ“´å±•æ¶æ§‹</h3>
            <div class="mermaid">
graph TD
    LB[Load Balancer]
    
    S1[Server Instance 1]
    S2[Server Instance 2]  
    S3[Server Instance 3]
    
    DB1[Primary DB]
    DB2[Read Replica 1]
    DB3[Read Replica 2]
    
    LB --> S1
    LB --> S2
    LB --> S3
    
    S1 --> DB1
    S2 --> DB2
    S3 --> DB3
            </div>

            <h3>æ•ˆèƒ½å„ªåŒ–ç­–ç•¥</h3>
            <div class="arch-grid">
                <div class="arch-component">
                    <h4>é€£æ¥æ± ç®¡ç†</h4>
                    <ul>
                        <li>è³‡æ–™åº«é€£æ¥æ± </li>
                        <li>WebSocket é€£æ¥ç®¡ç†</li>
                        <li>HTTP è«‹æ±‚æ± åŒ–</li>
                    </ul>
                </div>
                <div class="arch-component">
                    <h4>å¿«å–æ©Ÿåˆ¶</h4>
                    <ul>
                        <li>è¨˜æ†¶é«”å¿«å–å¸¸ç”¨æ•¸æ“š</li>
                        <li>æŸ¥è©¢çµæœå¿«å–</li>
                        <li>é…ç½®è³‡è¨Šå¿«å–</li>
                    </ul>
                </div>
                <div class="arch-component">
                    <h4>éåŒæ­¥è™•ç†</h4>
                    <ul>
                        <li>éé˜»å¡ I/O æ“ä½œ</li>
                        <li>å¤šåŸ·è¡Œç·’è™•ç†</li>
                        <li>äº‹ä»¶é©…å‹•æ¶æ§‹</li>
                    </ul>
                </div>
                <div class="arch-component">
                    <h4>è² è¼‰åˆ†æ•£</h4>
                    <ul>
                        <li>å¾®æœå‹™æ¶æ§‹</li>
                        <li>æœå‹™ç™¼ç¾æ©Ÿåˆ¶</li>
                        <li>è‡ªå‹•æ“´ç¸®å®¹</li>
                    </ul>
                </div>
            </div>

            <h3>æ“´å±•é…ç½®</h3>
            <div class="code-container">
                <div class="code-header">
                    <span>âš™ï¸</span> å¯æ“´å±•æ€§é…ç½®
                </div>
                <pre><code class="language-python">class ScalabilityConfig:
    def __init__(self):
        self.max_connections = int(os.getenv('MAX_CONNECTIONS', '100'))
        self.worker_processes = int(os.getenv('WORKER_PROCESSES', '4'))
        self.db_pool_size = int(os.getenv('DB_POOL_SIZE', '20'))
        self.cache_size = int(os.getenv('CACHE_SIZE', '1000'))
        
        # è² è¼‰å‡è¡¡é…ç½®
        self.enable_load_balancing = os.getenv('ENABLE_LB', 'false').lower() == 'true'
        self.server_instances = os.getenv('SERVER_INSTANCES', '1')
        
        # ç›£æ§é…ç½®
        self.enable_metrics = os.getenv('ENABLE_METRICS', 'true').lower() == 'true'
        self.metrics_port = int(os.getenv('METRICS_PORT', '9090'))</code></pre>
            </div>

            <div class="alert alert-success">
                <strong>âœ¨ æœªä¾†æ“´å±•æ–¹å‘ï¼š</strong>
                <ul style="margin-top: 10px;">
                    <li>æ”¯æ´æ›´å¤šéŠæˆ²ä¾›æ‡‰å•†å’Œé¡å‹</li>
                    <li>æ·»åŠ æ©Ÿå™¨å­¸ç¿’æ•¸æ“šåˆ†æåŠŸèƒ½</li>
                    <li>å¯¦ç¾é›²ç«¯éƒ¨ç½²å’Œè‡ªå‹•æ“´ç¸®å®¹</li>
                    <li>é–‹ç™¼è¡Œå‹•ç«¯ç®¡ç†æ‡‰ç”¨</li>
                </ul>
            </div>
        </div>

        <!-- ç³»çµ±æ¼”ç¤ºå½±ç‰‡ -->
        <div class="card" id="demo">
            <h2><span class="icon">ğŸ¬</span>ç³»çµ±æ¼”ç¤ºå½±ç‰‡</h2>
            <div class="media-container">
                <video controls>
                    <source src="gameDump.mp4" type="video/quicktime">
                    <source src="gameDump.mp4" type="video/mp4">
                    æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´å½±ç‰‡æ’­æ”¾ã€‚
                </video>
                <p class="media-caption">Game Dump å·¥å…·å®Œæ•´æ“ä½œæ¼”ç¤º</p>
            </div>
            
            <div class="feature-grid">
                <div class="feature-item">
                    <h4>ğŸš€ å¿«é€Ÿéƒ¨ç½²</h4>
                    <p>ä¸€éµå®‰è£ Chrome æ“´å±•ï¼Œç°¡å–®é…ç½®å³å¯é–‹å§‹ä½¿ç”¨</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ“Š å³æ™‚ç›£æ§</h4>
                    <p>å¯¦æ™‚é¡¯ç¤ºæ•¸æ“šæ”¶é›†é€²åº¦å’Œç³»çµ±ç‹€æ…‹</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ”§ å½ˆæ€§é…ç½®</h4>
                    <p>æ”¯æ´å¤šç¨®éŠæˆ²å’Œå®¢è£½åŒ–åƒæ•¸è¨­å®š</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ“ˆ æ•¸æ“šåˆ†æ</h4>
                    <p>æä¾›è±å¯Œçš„æ•¸æ“šåˆ†æå’Œè¦–è¦ºåŒ–åŠŸèƒ½</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="header" style="margin-top: 40px; text-align: center;">
            <p style="color: #7f8c8d; font-size: 0.9em;">
                Â© 2025 Game Dump Tool | ç‰ˆæœ¬ 1.0.6<br>
                æœ€å¾Œæ›´æ–°: 2025å¹´9æœˆ29æ—¥<br>
                <a href="https://github.com/alphaelf0080/gameDumpTool" style="color: #3498db;">GitHub Repository</a>
            </p>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ– Mermaid
        mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            securityLevel: 'loose',
            fontFamily: 'Arial, sans-serif',
            flowchart: {
                useMaxWidth: true
            },
            sequence: {
                useMaxWidth: true,
                showSequenceNumbers: false
            },
            er: {
                useMaxWidth: true
            }
        });

        // å¹³æ»‘æ»¾å‹•åˆ°éŒ¨é»
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // åˆå§‹åŒ–å’Œè¼‰å…¥è™•ç†
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded, initializing Mermaid...');
            
            // å»¶é²åˆå§‹åŒ–ä»¥ç¢ºä¿æ‰€æœ‰è³‡æºè¼‰å…¥å®Œæˆ
            setTimeout(() => {
                try {
                    // æ‰‹å‹•æ¸²æŸ“æ¯å€‹åœ–è¡¨
                    const mermaidElements = document.querySelectorAll('.mermaid');
                    console.log(`Found ${mermaidElements.length} mermaid elements`);
                    
                    mermaidElements.forEach((element, index) => {
                        console.log(`Processing mermaid element ${index + 1}`);
                        const content = element.textContent.trim();
                        
                        if (content) {
                            // æ¸…ç©ºå…ƒç´ ä¸¦é¡¯ç¤ºè¼‰å…¥ç‹€æ…‹
                            element.innerHTML = '<div class="mermaid-loading">ğŸ”„ è¼‰å…¥åœ–è¡¨ä¸­...</div>';
                            
                            // å˜—è©¦æ¸²æŸ“åœ–è¡¨
                            try {
                                mermaid.render(`mermaid-${index}`, content).then(result => {
                                    element.innerHTML = result.svg;
                                    console.log(`Mermaid chart ${index + 1} rendered successfully`);
                                }).catch(error => {
                                    console.error(`Failed to render mermaid chart ${index + 1}:`, error);
                                    element.innerHTML = `
                                        <div style="text-align: center; padding: 20px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 10px;">
                                            <p>âš ï¸ åœ–è¡¨è¼‰å…¥å¤±æ•—</p>
                                            <p style="font-size: 0.8em; color: #666;">éŒ¯èª¤: ${error.message || 'Unknown error'}</p>
                                            <button onclick="location.reload()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                                ğŸ”„ é‡æ–°è¼‰å…¥é é¢
                                            </button>
                                        </div>
                                    `;
                                });
                            } catch (error) {
                                console.error(`Error rendering mermaid chart ${index + 1}:`, error);
                                element.innerHTML = `
                                    <div style="text-align: center; padding: 20px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 10px;">
                                        <p>âš ï¸ åœ–è¡¨è¼‰å…¥å¤±æ•—</p>
                                        <p style="font-size: 0.8em; color: #666;">èªæ³•éŒ¯èª¤æˆ–ä¸æ”¯æ´çš„åœ–è¡¨é¡å‹</p>
                                    </div>
                                `;
                            }
                        }
                    });
                } catch (error) {
                    console.error('Error initializing Mermaid:', error);
                }
            }, 1000);
        });

        // æ·»åŠ ç¨‹å¼ç¢¼è¤‡è£½åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const codeBlocks = document.querySelectorAll('pre code');
            codeBlocks.forEach((codeBlock, index) => {
                const button = document.createElement('button');
                button.className = 'copy-button';
                button.textContent = 'ğŸ“‹ è¤‡è£½';
                button.style.cssText = `
                    position: absolute;
                    top: 10px;
                    right: 10px;
                    background: #2c3e50;
                    color: white;
                    border: none;
                    padding: 5px 10px;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 12px;
                    z-index: 10;
                `;
                
                const container = codeBlock.closest('.code-container');
                if (container) {
                    container.style.position = 'relative';
                    container.appendChild(button);
                    
                    button.addEventListener('click', function() {
                        const textArea = document.createElement('textarea');
                        textArea.value = codeBlock.textContent;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        
                        button.textContent = 'âœ… å·²è¤‡è£½';
                        setTimeout(() => {
                            button.textContent = 'ğŸ“‹ è¤‡è£½';
                        }, 2000);
                    });
                }
            });
        });

        // æ·»åŠ è¿”å›é ‚éƒ¨æŒ‰éˆ•
        const backToTopButton = document.createElement('button');
        backToTopButton.innerHTML = 'â¬†ï¸';
        backToTopButton.style.cssText = `
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 20px;
            box-shadow: var(--shadow);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
        `;
        document.body.appendChild(backToTopButton);

        // é¡¯ç¤º/éš±è—è¿”å›é ‚éƒ¨æŒ‰éˆ•
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                backToTopButton.style.opacity = '1';
            } else {
                backToTopButton.style.opacity = '0';
            }
        });

        // è¿”å›é ‚éƒ¨åŠŸèƒ½
        backToTopButton.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    </script>
</body>
</html>