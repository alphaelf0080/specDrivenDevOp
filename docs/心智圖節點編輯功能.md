# 心智圖節點編輯功能

## 功能概述

新增了雙擊節點進行完整編輯的功能，可以同時編輯節點的文字內容和視覺樣式。

## 使用方式

### 1. 雙擊編輯節點
- **操作**: 雙擊任意節點
- **功能**: 開啟節點編輯器，可以編輯：
  - 節點標題
  - 節點描述
  - 視覺樣式（背景色、邊框、文字等）

### 2. 右鍵選單（保留原功能）
- **操作**: 右鍵點擊節點
- **功能**: 
  - 新增子節點
  - 刪除節點
  - 編輯樣式（僅樣式，不含文字）

## 節點編輯器功能

### 📝 文字編輯
- **標題**: 主要顯示的節點名稱
- **描述**: 額外的說明文字（選填）

### 🎨 快速配色
提供 8 種預設配色方案：
1. **藍色** - 適合根節點
2. **綠色** - 適合分支節點
3. **黃色** - 適合葉節點
4. **紅色** - 重點標記
5. **紫色** - 特殊標記
6. **灰色** - 一般節點
7. **青色** - 資訊節點
8. **橙色** - 警告節點

### 🎯 詳細樣式設定
- **背景顏色**: 支援顏色選擇器和色碼輸入
- **邊框顏色**: 支援顏色選擇器和色碼輸入
- **文字顏色**: 支援顏色選擇器和色碼輸入
- **邊框寬度**: 1-10px，滑桿調整
- **圓角半徑**: 0-30px，滑桿調整
- **文字大小**: 10-24px，滑桿調整
- **文字粗細**: 一般/粗體/半粗體/細體

### 👁️ 即時預覽
編輯器頂部會即時顯示節點的最終效果，所見即所得。

## 實作細節

### 新增檔案
1. **`NodeEditor.tsx`** - 節點完整編輯器組件
2. **`NodeEditor.css`** - 編輯器樣式

### 修改檔案
1. **`MindMapCanvas.tsx`**
   - 引入 `NodeEditor` 組件
   - 新增 `nodeBeingEdited` 狀態
   - 新增 `onNodeDoubleClick` 事件處理
   - 新增 `handleSaveNodeEdit` 保存處理
   - 渲染 `NodeEditor` 組件

### 技術特點
- **TypeScript 類型安全**: 完整的型別定義
- **React Hooks**: 使用 `useState`, `useCallback` 優化性能
- **即時預覽**: 所有變更即時反映在預覽區
- **響應式設計**: 支援桌面和移動裝置
- **動畫效果**: 平滑的過渡和互動反饋
- **色彩管理**: 支援顏色選擇器和十六進制色碼輸入

## 互動流程

```
使用者雙擊節點
    ↓
觸發 onNodeDoubleClick
    ↓
設定 nodeBeingEdited 狀態
    ↓
顯示 NodeEditor 模態框
    ↓
使用者編輯內容和樣式
    ↓
點擊「儲存」按鈕
    ↓
呼叫 handleSaveNodeEdit
    ↓
更新節點狀態
    ↓
通知父組件 (onNodesChange)
    ↓
關閉編輯器
```

## 資料結構

### 節點更新格式
```typescript
{
  label?: string,              // 節點標題
  description?: string,        // 節點描述
  style?: {
    backgroundColor: string,   // 背景色
    borderColor: string,       // 邊框色
    borderWidth: number,       // 邊框寬度
    textColor: string,         // 文字色
    fontSize: number,          // 文字大小
    borderRadius: number,      // 圓角半徑
    fontWeight: string,        // 文字粗細
  }
}
```

## 快捷鍵

- **雙擊節點**: 開啟編輯器
- **ESC 鍵**: 關閉編輯器（未實作，可加入）
- **Enter 鍵**: 儲存變更（未實作，可加入）

## 使用範例

### 場景 1: 編輯節點標題
1. 雙擊「Phase 0: 準備」節點
2. 將標題改為「Phase 0: 環境準備」
3. 點擊儲存

### 場景 2: 調整節點樣式
1. 雙擊任意節點
2. 選擇「紅色」快速配色
3. 調整文字大小為 16px
4. 點擊儲存

### 場景 3: 新增描述
1. 雙擊節點
2. 在描述欄輸入詳細說明
3. 調整樣式讓節點更醒目
4. 點擊儲存

## 未來擴展

可以考慮加入的功能：
- [ ] 支援 Markdown 格式的描述
- [ ] 節點圖示選擇
- [ ] 自訂字型
- [ ] 漸層背景色
- [ ] 陰影效果
- [ ] 批量編輯多個節點
- [ ] 樣式模板儲存和套用
- [ ] 鍵盤快捷鍵支援

## 測試建議

1. 測試雙擊不同類型的節點（root/branch/leaf）
2. 測試所有顏色選擇器
3. 測試滑桿調整各項數值
4. 測試快速配色按鈕
5. 測試長文字的標題和描述
6. 測試在不同螢幕尺寸下的顯示
7. 測試取消編輯的行為
8. 測試連續編輯多個節點
