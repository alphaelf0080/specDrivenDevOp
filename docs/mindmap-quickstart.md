# å¿ƒæ™ºåœ–æ¨¡çµ„ - å¿«é€Ÿå…¥é–€

## ğŸ¯ æ¦‚è¿°

å¿ƒæ™ºåœ–æ¨¡çµ„å·²æˆåŠŸæ•´åˆåˆ°å°ˆæ¡ˆä¸­ï¼Œæä¾›å®Œæ•´çš„å¯è¦–åŒ–å¿ƒæ™ºåœ–ç¹ªè£½åŠŸèƒ½ã€‚

## ğŸ“ æª”æ¡ˆçµæ§‹

```
client/
â”œâ”€â”€ types/
â”‚   â””â”€â”€ mindmap.ts                # å‹åˆ¥å®šç¾©
â”œâ”€â”€ components/
â”‚   â””â”€â”€ MindMap/
â”‚       â”œâ”€â”€ index.ts              # æ¨¡çµ„åŒ¯å‡º
â”‚       â”œâ”€â”€ MindMapCanvas.tsx     # ç•«å¸ƒå…ƒä»¶
â”‚       â”œâ”€â”€ MindMapCanvas.css     # ç•«å¸ƒæ¨£å¼
â”‚       â”œâ”€â”€ MindMapNode.tsx       # ç¯€é»å…ƒä»¶
â”‚       â”œâ”€â”€ MindMapNode.css       # ç¯€é»æ¨£å¼
â”‚       â”œâ”€â”€ MindMapDemo.tsx       # ç¤ºç¯„å…ƒä»¶
â”‚       â””â”€â”€ MindMapDemo.css       # ç¤ºç¯„æ¨£å¼
â””â”€â”€ hooks/
    â””â”€â”€ useMindMap.ts             # è³‡æ–™ç®¡ç† Hook
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

```bash
# åŒæ™‚å•Ÿå‹•å‰å¾Œç«¯
npm run dev

# æˆ–åˆ†åˆ¥å•Ÿå‹•
npm run dev:server  # å¾Œç«¯ï¼šhttp://localhost:5010
npm run dev:client  # å‰ç«¯ï¼šhttp://localhost:5030
```

### 2. è¨ªå•å¿ƒæ™ºåœ–

1. é–‹å•Ÿç€è¦½å™¨ï¼šhttp://localhost:5030
2. é»æ“Šã€ŒğŸ“Š é–‹å•Ÿå¿ƒæ™ºåœ–ã€æŒ‰éˆ•
3. é–‹å§‹ä½¿ç”¨å¿ƒæ™ºåœ–å·¥å…·

## âœ¨ ä¸»è¦åŠŸèƒ½

- âœ… **è‡ªå‹•å¸ƒå±€**ï¼šä½¿ç”¨ Dagre æ¼”ç®—æ³•æ™ºèƒ½æ’åˆ—ç¯€é»
- âœ… **æ‹–æ›³æ“ä½œ**ï¼šå¯æ‹–æ›³ç¯€é»è‡ªç”±ç§»å‹•
- âœ… **ç¸®æ”¾æ§åˆ¶**ï¼šæ»¾è¼ªç¸®æ”¾ã€æ§åˆ¶é¢æ¿ç¸®æ”¾
- âœ… **ç¯€é»é€£æ¥**ï¼šé»æ“Šç¯€é»å»ºç«‹é€£æ¥
- âœ… **å¤šé¸æ“ä½œ**ï¼šæ¡†é¸å¤šå€‹ç¯€é»
- âœ… **å°åœ°åœ–å°èˆª**ï¼šå¿«é€Ÿå®šä½
- âœ… **æ­·å²è¨˜éŒ„**ï¼šå¾©åŸ/é‡åšåŠŸèƒ½
- âœ… **è³‡æ–™åŒ¯å‡º**ï¼šJSON æ ¼å¼åŒ¯å‡º
- âœ… **å‹•ç•«æ•ˆæœ**ï¼šæµæš¢çš„é€£æ¥ç·šå‹•ç•«

## ğŸ¨ ç¯€é»é¡å‹

### Rootï¼ˆæ ¹ç¯€é»ï¼‰
- ç´«è‰²æ¼¸å±¤èƒŒæ™¯
- é©ç”¨æ–¼ä¸»é¡Œæˆ–ä¸­å¿ƒæ¦‚å¿µ

### Branchï¼ˆåˆ†æ”¯ç¯€é»ï¼‰
- ç¶ è‰²é‚Šæ¡†
- é©ç”¨æ–¼ä¸»è¦åˆ†é¡æˆ–ç« ç¯€

### Leafï¼ˆè‘‰ç¯€é»ï¼‰
- æ©˜è‰²é‚Šæ¡†
- é©ç”¨æ–¼å…·é«”é …ç›®æˆ–ç´°ç¯€

## ğŸ› ï¸ å·¥å…·åˆ—åŠŸèƒ½

| æŒ‰éˆ• | åŠŸèƒ½ | å¿«æ·éµ |
|------|------|--------|
| â• æ–°å¢ç¯€é» | éš¨æ©Ÿæ·»åŠ æ–°ç¯€é» | - |
| ğŸ”„ é‡æ–°å¸ƒå±€ | é‡æ–°è¨ˆç®—ç¯€é»ä½ç½® | - |
| â†¶ å¾©åŸ | æ’¤éŠ·ä¸Šä¸€æ­¥æ“ä½œ | - |
| â†· é‡åš | é‡åšè¢«æ’¤éŠ·çš„æ“ä½œ | - |
| ğŸ’¾ åŒ¯å‡º JSON | ä¸‹è¼‰å¿ƒæ™ºåœ–è³‡æ–™ | - |
| ğŸ—‘ï¸ æ¸…ç©º | é‡ç½®æ‰€æœ‰è³‡æ–™ | - |

## ğŸ“ ç¨‹å¼ç¢¼ç¯„ä¾‹

### åŸºç¤ä½¿ç”¨

```tsx
import { MindMapDemo } from './components/MindMap';

function App() {
  return <MindMapDemo />;
}
```

### è‡ªè¨‚å¯¦ä½œ

```tsx
import { MindMapCanvas, useMindMap } from './components/MindMap';

function MyMindMap() {
  const { nodes, edges, initializeData } = useMindMap();

  React.useEffect(() => {
    initializeData({
      nodes: [
        { id: '1', label: 'æ ¹ç¯€é»', type: 'root' },
        { id: '2', label: 'å­ç¯€é»', type: 'branch' },
      ],
      edges: [
        { id: 'e1', source: '1', target: '2' },
      ],
    });
  }, []);

  return (
    <MindMapCanvas
      initialNodes={nodes}
      initialEdges={edges}
      config={{ minimap: true, controls: true }}
    />
  );
}
```

## ğŸ¯ ä½¿ç”¨æ¡ˆä¾‹

### 1. SDD é–‹ç™¼æµç¨‹
é è¨­ç¤ºç¯„å±•ç¤ºäº† Spec-Driven Development çš„å®Œæ•´æµç¨‹ï¼š
- è¦æ ¼å®šç¾©
- å¼•æ“é–‹ç™¼
- æ¸¬è©¦é©—è­‰
- éƒ¨ç½²ç™¼å¸ƒ

### 2. å°ˆæ¡ˆè¦åŠƒ
å¯ç”¨æ–¼ï¼š
- å°ˆæ¡ˆæ¶æ§‹è¨­è¨ˆ
- åŠŸèƒ½æ¨¡çµ„åˆ†è§£
- ä»»å‹™ä¾è³´é—œä¿‚
- åœ˜éšŠå”ä½œæµç¨‹

### 3. çŸ¥è­˜ç®¡ç†
é©åˆï¼š
- å­¸ç¿’ç­†è¨˜æ•´ç†
- æŠ€è¡“æ–‡æª”çµæ§‹
- API è¨­è¨ˆåœ–
- è³‡æ–™åº« ER åœ–

## ğŸ“š é€²éšåŠŸèƒ½

### è‡ªè¨‚ç¯€é»æ¨£å¼

```typescript
const customNode: MindMapNode = {
  id: 'custom-1',
  label: 'è‡ªè¨‚ç¯€é»',
  type: 'branch',
  style: {
    backgroundColor: '#ff6b6b',
    borderColor: '#c92a2a',
    textColor: 'white',
    fontSize: 16,
    borderRadius: 12,
  },
};
```

### ç¨‹å¼åŒ–æ·»åŠ ç¯€é»

```typescript
const { addNode } = useMindMap();

// æ·»åŠ åˆ°ç‰¹å®šçˆ¶ç¯€é»
addNode('parent-id', {
  label: 'æ–°ç¯€é»',
  type: 'leaf',
  data: { description: 'æè¿°æ–‡å­—' },
});
```

### åŒ¯å‡ºè³‡æ–™

```typescript
const { exportData } = useMindMap();

const data = exportData();
console.log(JSON.stringify(data, null, 2));
```

## ğŸ”§ é…ç½®é¸é …

```typescript
const config: MindMapConfig = {
  layout: 'horizontal',        // å¸ƒå±€æ–¹å‘ï¼šhorizontal | vertical
  animated: true,              // å•Ÿç”¨å‹•ç•«æ•ˆæœ
  minimap: true,               // é¡¯ç¤ºå°åœ°åœ–
  controls: true,              // é¡¯ç¤ºæ§åˆ¶é¢æ¿
  zoomOnScroll: true,          // æ»¾è¼ªç¸®æ”¾
  panOnDrag: true,             // æ‹–æ›³å¹³ç§»
  nodeSpacing: 50,             // ç¯€é»é–“è·
  rankSpacing: 100,            // å±¤ç´šé–“è·
};
```

## âš¡ æ•ˆèƒ½æç¤º

1. **å¤§é‡ç¯€é»**ï¼šé—œé–‰ minimap å’Œ animated
2. **åˆæ¬¡è¼‰å…¥**ï¼šä½¿ç”¨æ‡¶åŠ è¼‰è¼‰å…¥å¿ƒæ™ºåœ–å…ƒä»¶
3. **é »ç¹æ›´æ–°**ï¼šä½¿ç”¨ React.memo å„ªåŒ–æ¸²æŸ“

## ğŸ› å¸¸è¦‹å•é¡Œ

### Q: ç¯€é»é‡ç–Šæ€éº¼è¾¦ï¼Ÿ
A: é»æ“Šã€ŒğŸ”„ é‡æ–°å¸ƒå±€ã€æŒ‰éˆ•é‡æ–°è¨ˆç®—ä½ç½®

### Q: å¦‚ä½•åŒ¯å‡ºåœ–ç‰‡ï¼Ÿ
A: ç›®å‰åƒ…æ”¯æ´ JSON åŒ¯å‡ºï¼Œåœ–ç‰‡åŒ¯å‡ºåŠŸèƒ½é–‹ç™¼ä¸­

### Q: èƒ½å¦è‡ªè¨‚ç¯€é»å½¢ç‹€ï¼Ÿ
A: å¯ä»¥é€é CSS ä¿®æ”¹ `.mindmap-node` é¡åˆ¥æ¨£å¼

### Q: æ”¯æ´å”ä½œç·¨è¼¯å—ï¼Ÿ
A: ç›®å‰ç‚ºæœ¬åœ°ç‰ˆæœ¬ï¼Œå”ä½œåŠŸèƒ½å¾…å¾ŒçºŒç‰ˆæœ¬

## ğŸ“– å®Œæ•´æ–‡æª”

è©³ç´°ä½¿ç”¨æŒ‡å—è«‹åƒé–±ï¼š
- [mindmap-usage-guide.md](./mindmap-usage-guide.md)

## ğŸ“ å­¸ç¿’è³‡æº

- [ReactFlow å®˜æ–¹æ–‡æª”](https://reactflow.dev/)
- [Dagre å¸ƒå±€ç®—æ³•](https://github.com/dagrejs/dagre)

---

**æœ€å¾Œæ›´æ–°**ï¼š2025-10-06  
**ç‰ˆæœ¬**ï¼š1.0.0
