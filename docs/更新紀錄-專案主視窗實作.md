# å°ˆæ¡ˆä¸»è¦–çª—åŠŸèƒ½å¯¦ä½œ - æ›´æ–°ç´€éŒ„

**æ—¥æœŸ**: 2025å¹´10æœˆ9æ—¥  
**ç‰ˆæœ¬**: Unreleased  
**é¡å‹**: æ–°å¢åŠŸèƒ½ (Added)

---

## ğŸ“‹ æ¦‚è¦

å¯¦ä½œå®Œæ•´çš„å°ˆæ¡ˆä¸»è¦–çª—ï¼Œæ¡ç”¨å››è‰²åˆ†å€å¸ƒå±€è¨­è¨ˆï¼Œæä¾›æ¸…æ™°çš„è¦–è¦ºå±¤æ¬¡å’Œå®Œæ•´çš„å°ˆæ¡ˆç®¡ç†ä»‹é¢ã€‚

---

## ğŸ¯ å¯¦ä½œå…§å®¹

### 1. å°ˆæ¡ˆä¸»è¦–çª—å…ƒä»¶ (ProjectMainWindow)

**æª”æ¡ˆ**: `client/components/Project/ProjectMainWindow.tsx` (131 è¡Œ)

#### åŠŸèƒ½ç‰¹æ€§
- âœ… å°ˆæ¡ˆè³‡æ–™è¼‰å…¥ (GET /api/projects/:id)
- âœ… äº”å€‹ä¸»è¦åˆ†é åˆ‡æ›:
  - Overview (ç¸½è¦½)
  - Specs (è¦æ ¼æ–‡ä»¶)
  - Design (è¨­è¨ˆè³‡æº)
  - Develop (é–‹ç™¼é€²åº¦)
  - Test (æ¸¬è©¦é©—è­‰)
- âœ… è¼‰å…¥ç‹€æ…‹é¡¯ç¤º
- âœ… éŒ¯èª¤è™•ç†èˆ‡æç¤º
- âœ… å°ˆæ¡ˆè³‡è¨Šé¡¯ç¤º (åç¨±ã€é¡å‹ã€ç‹€æ…‹ã€æ›´æ–°æ™‚é–“)

#### TypeScript ä»‹é¢
```typescript
interface ProjectMainWindowProps {
  projectId: number;
  onClose?: () => void;
}

interface Project {
  id: number;
  uuid: string;
  name: string;
  name_zh: string;
  name_en: string;
  game_type: string;
  description: string;
  status: string;
  owner_id: string;
  created_at: string;
  updated_at: string;
}
```

#### React Hooks ä½¿ç”¨
- `useState`: project, loading, error, activeSection
- `useEffect`: å…ƒä»¶è¼‰å…¥æ™‚è‡ªå‹•å‘¼å« loadProject()

---

### 2. æ¨£å¼è¨­è¨ˆ (ProjectMainWindow.css)

**æª”æ¡ˆ**: `client/components/Project/ProjectMainWindow.css` (105 è¡Œ)

#### å¸ƒå±€æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”µ Header (64px Ã— 100%)                          â”‚
â”‚ è—è‰²æ¼¸å±¤: #3b82f6 â†’ #2563eb                       â”‚
â”‚ å°ˆæ¡ˆåœ–æ¨™ + æ¨™é¡Œ + å…ƒæ•¸æ“š + å„²å­˜/é—œé–‰æŒ‰éˆ•           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´   â”‚ ğŸŸ¢ Preview         â”‚ ğŸŸ¡ Editor          â”‚
â”‚ Navi â”‚ (280px)            â”‚ (1fr)              â”‚
â”‚(60px)â”‚ ç¶ è‰²: #22c55e â†’    â”‚ é»ƒè‰²: #fbbf24 â†’    â”‚
â”‚      â”‚       #16a34a      â”‚       #f59e0b      â”‚
â”‚  [O] â”‚                    â”‚                    â”‚
â”‚  [S] â”‚ å°ˆæ¡ˆåç¨±           â”‚ éºµåŒ…å±‘å°èˆª         â”‚
â”‚  [D] â”‚ éŠæˆ²é¡å‹           â”‚                    â”‚
â”‚  [V] â”‚                    â”‚ å…§å®¹å€             â”‚
â”‚  [T] â”‚ å°èˆªé¸å–®           â”‚ (å¯æ»¾å‹•)           â”‚
â”‚      â”‚                    â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### CSS æŠ€è¡“ç´°ç¯€

**Flexbox + Grid æ··åˆå¸ƒå±€**
```css
.project-main-window {
  display: flex;
  flex-direction: column;  /* å‚ç›´æ’åˆ— header å’Œ body */
  height: 100vh;
}

.project-body {
  display: grid;
  grid-template-columns: 60px 280px 1fr;  /* ä¸‰æ¬„å›ºå®š+å½ˆæ€§å¸ƒå±€ */
  flex: 1;
}
```

**å››è‰²æ¼¸å±¤è¨­è¨ˆ**
| å€åŸŸ | CSS é¡åˆ¥ | å¯¬åº¦ | é¡è‰² | æ¼¸å±¤ |
|------|----------|------|------|------|
| Header | `.project-header` | 100% Ã— 64px | è—è‰² | `135deg, #3b82f6 â†’ #2563eb` |
| Navi | `.sidebar-narrow` | 60px | ç´…è‰² | `180deg, #ef4444 â†’ #dc2626` |
| Preview | `.sidebar-medium` | 280px | ç¶ è‰² | `180deg, #22c55e â†’ #16a34a` |
| Editor | `.main-content-area` | 1fr | é»ƒè‰² | `180deg, #fbbf24 â†’ #f59e0b` |

**äº’å‹•æ•ˆæœ**
```css
.nav-icon-btn:hover {
  background: rgba(255, 255, 255, 0.15);
}

.nav-icon-btn.active {
  background: rgba(255, 255, 255, 0.25);
  color: white;
}
```

---

### 3. å°ˆæ¡ˆé é¢å…¥å£ (ProjectPage)

**æª”æ¡ˆ**: `client/pages/ProjectPage.tsx` (44 è¡Œ)

#### åŠŸèƒ½
- âœ… è§£æ URL åƒæ•¸ `?view=project-page&id={projectId}`
- âœ… é©—è­‰å°ˆæ¡ˆ ID æœ‰æ•ˆæ€§
- âœ… æ¸²æŸ“ ProjectMainWindow å…ƒä»¶
- âœ… æä¾›é—œé–‰è¦–çª—åŠŸèƒ½

#### URL åƒæ•¸è™•ç†
```typescript
const params = new URLSearchParams(window.location.search);
const projectId = params.get('id');
```

---

### 4. é¦–é æ•´åˆ (HomePage)

**æª”æ¡ˆ**: `client/components/Navigation/HomePage.tsx`

#### ä¿®æ”¹å…§å®¹

**å°ˆæ¡ˆçµ±è¨ˆå€åŸŸé‡æ–°æ’åˆ—**
```tsx
{/* ç§»è‡³å°ˆæ¡ˆåˆ—è¡¨ä¸Šæ–¹ */}
<div className="project-stats">
  <div className="stat-item">
    <span className="stat-label">å°ˆæ¡ˆç¸½æ•¸</span>
    <span className="stat-value">{projects.length}</span>
  </div>
  <div className="stat-item">
    <span className="stat-label">è³‡æ–™åº«ç‹€æ…‹</span>
    <span className="stat-value connected">å·²é€£ç·š</span>
  </div>
</div>
```

**å°ˆæ¡ˆå¡ç‰‡å„ªåŒ–**
- é«˜åº¦: 70px â†’ **48px**
- ç§»é™¤å‰¯æ¨™é¡Œé¡¯ç¤º
- å–®è¡Œç·Šæ¹Šå¸ƒå±€

**æ–°è¦–çª—é–‹å•Ÿ**
```typescript
onClick={() => {
  const projectWindow = window.open(
    `/?view=project-page&id=${project.id}`,
    `project-${project.id}`,
    'width=1400,height=900,left=100,top=50'
  );
  if (projectWindow) projectWindow.focus();
}}
```

**CSS è®Šæ›´** (`client/components/Navigation/HomePage.css`)
```css
.project-card {
  height: 48px;           /* å¾ min-height: 70px æ”¹ç‚ºå›ºå®šé«˜åº¦ */
  padding: 0.625rem 1rem; /* ç¸®å°å…§è· */
}

.project-stats {
  margin-bottom: 1rem;    /* æ–°å¢åº•éƒ¨é–“è· */
}
```

---

### 5. è·¯ç”±æ•´åˆ (App.tsx)

**æª”æ¡ˆ**: `client/App.tsx`

#### ä¿®æ”¹å…§å®¹
```typescript
// 1. æ–°å¢ import
import ProjectPage from './pages/ProjectPage';

// 2. æ“´å±• PageView é¡å‹
type PageView = 'home' | 'mindmap-manager' | 'project-page';

// 3. æ–°å¢è·¯ç”±åˆ¤æ–·
if (params.get('view') === 'project-page') {
  setCurrentView('project-page');
}

// 4. æ–°å¢è·¯ç”±æ¸²æŸ“
case 'project-page':
  return <ProjectPage />;
```

---

## ğŸ“ æª”æ¡ˆè®Šæ›´æ¸…å–®

### æ–°å¢æª”æ¡ˆ (3)
1. âœ… `client/components/Project/ProjectMainWindow.tsx`
2. âœ… `client/components/Project/ProjectMainWindow.css`
3. âœ… `client/pages/ProjectPage.tsx`

### ä¿®æ”¹æª”æ¡ˆ (3)
1. âœ… `client/components/Navigation/HomePage.tsx`
   - å°ˆæ¡ˆçµ±è¨ˆå€ç§»è‡³åˆ—è¡¨ä¸Šæ–¹
   - å°ˆæ¡ˆå¡ç‰‡æ”¹ç‚ºå–®è¡Œé«˜åº¦
   - æ–°å¢ window.open æ–°è¦–çª—é–‹å•Ÿ

2. âœ… `client/components/Navigation/HomePage.css`
   - .project-card é«˜åº¦å¾ min-height: 70px æ”¹ç‚º height: 48px
   - èª¿æ•´å…§è·å’Œå­—é«”å¤§å°
   - .project-stats æ–°å¢ margin-bottom

3. âœ… `client/App.tsx`
   - æ–°å¢ ProjectPage import
   - PageView é¡å‹æ–°å¢ 'project-page'
   - æ–°å¢ project-page è·¯ç”±åˆ¤æ–·å’Œæ¸²æŸ“

---

## ğŸ” æŠ€è¡“ç´°ç¯€

### ç‹€æ…‹ç®¡ç†
- **useState**: ç®¡ç†å°ˆæ¡ˆè³‡æ–™ã€è¼‰å…¥ç‹€æ…‹ã€éŒ¯èª¤è¨Šæ¯ã€ç•¶å‰åˆ†é 
- **useEffect**: å…ƒä»¶æ›è¼‰æ™‚è‡ªå‹•è¼‰å…¥å°ˆæ¡ˆè³‡æ–™

### API æ•´åˆ
- **ç«¯é»**: `GET /api/projects/:id`
- **å›æ‡‰æ ¼å¼**: `{ success: boolean, data: Project }`
- **éŒ¯èª¤è™•ç†**: try-catch åŒ…è£¹,é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯

### è¦–çª—ç®¡ç†
- **window.open()**: é–‹å•Ÿæ–°è¦–çª—
- **è¦–çª—å°ºå¯¸**: 1400Ã—900 åƒç´ 
- **è¦–çª—ä½ç½®**: left=100, top=50
- **è¦–çª—åç¨±**: `project-{id}` (é¿å…é‡è¤‡é–‹å•Ÿ)

### éŸ¿æ‡‰å¼è¨­è¨ˆ
```css
@media (max-width: 768px) {
  .project-body {
    grid-template-columns: 60px 1fr;
  }
  .sidebar-medium {
    display: none;
  }
}
```

---

## âœ… æ¸¬è©¦æª¢æŸ¥æ¸…å–®

### åŸºæœ¬åŠŸèƒ½
- [x] é¦–é é¡¯ç¤ºæœ€æ–° 5 å€‹å°ˆæ¡ˆ
- [x] å°ˆæ¡ˆçµ±è¨ˆé¡¯ç¤ºåœ¨åˆ—è¡¨ä¸Šæ–¹
- [x] é»æ“Šå°ˆæ¡ˆå¡ç‰‡é–‹å•Ÿæ–°è¦–çª—
- [x] æ–°è¦–çª—é¡¯ç¤ºå®Œæ•´çš„å°ˆæ¡ˆä¸»è¦–çª—
- [x] å››è‰²å¸ƒå±€æ­£ç¢ºé¡¯ç¤º (è—/ç´…/ç¶ /é»ƒ)

### äº’å‹•åŠŸèƒ½
- [x] é»æ“Šå·¦å´ç´…è‰²å°èˆªåœ–æ¨™åˆ‡æ›å…§å®¹
- [x] åœ–æ¨™ hover æ•ˆæœæ­£å¸¸
- [x] é¸ä¸­ç‹€æ…‹è¦–è¦ºå›é¥‹
- [x] å°ˆæ¡ˆè³‡æ–™æ­£ç¢ºè¼‰å…¥ä¸¦é¡¯ç¤º
- [x] è¼‰å…¥ç‹€æ…‹æ­£ç¢ºé¡¯ç¤º

### éŒ¯èª¤è™•ç†
- [x] ç„¡æ•ˆçš„å°ˆæ¡ˆ ID é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
- [x] API éŒ¯èª¤æ­£ç¢ºæ•ç²ä¸¦é¡¯ç¤º
- [x] ç¶²è·¯éŒ¯èª¤è™•ç†

### è¦–è¦ºæ•ˆæœ
- [x] æ¨™é¡Œåˆ—ä½”æ»¿å…¨å¯¬
- [x] ä¸‰æ¬„å¸ƒå±€æ¯”ä¾‹æ­£ç¢º (60px : 280px : 1fr)
- [x] æ¼¸å±¤èƒŒæ™¯æ­£ç¢ºé¡¯ç¤º
- [x] æ–‡å­—é¡è‰²å°æ¯”åº¦è‰¯å¥½

---

## ğŸš€ å¾ŒçºŒå„ªåŒ–å»ºè­°

### åŠŸèƒ½å¢å¼·
1. [ ] æ–°å¢å°ˆæ¡ˆç·¨è¼¯åŠŸèƒ½
2. [ ] å¯¦ä½œæª”æ¡ˆä¸Šå‚³èˆ‡ç®¡ç†
3. [ ] æ–°å¢å”ä½œåŠŸèƒ½ (å¤šäººç·¨è¼¯)
4. [ ] å¯¦ä½œç‰ˆæœ¬æ§åˆ¶
5. [ ] æ–°å¢è©•è«–ç³»çµ±

### æ•ˆèƒ½å„ªåŒ–
1. [ ] å¯¦ä½œè™›æ“¬æ»¾å‹• (é•·åˆ—è¡¨)
2. [ ] æ–°å¢è³‡æ–™å¿«å–æ©Ÿåˆ¶
3. [ ] å¯¦ä½œæ‡¶è¼‰å…¥
4. [ ] å„ªåŒ–åœ–ç‰‡è¼‰å…¥

### ä½¿ç”¨è€…é«”é©—
1. [ ] æ–°å¢éµç›¤å¿«æ·éµ
2. [ ] å¯¦ä½œæ‹–æ”¾åŠŸèƒ½
3. [ ] æ–°å¢æœå°‹èˆ‡ç¯©é¸
4. [ ] æ”¹å–„éŒ¯èª¤æç¤ºè¨Šæ¯
5. [ ] æ–°å¢æ“ä½œå¼•å°

---

## ğŸ“Š ç¨‹å¼ç¢¼çµ±è¨ˆ

| é¡å‹ | æª”æ¡ˆæ•¸ | æ–°å¢è¡Œæ•¸ | ä¿®æ”¹è¡Œæ•¸ | åˆªé™¤è¡Œæ•¸ |
|------|--------|----------|----------|----------|
| TypeScript | 4 | 150+ | 30+ | 10+ |
| CSS | 2 | 100+ | 20+ | 0 |
| Markdown | 1 | 50+ | 5+ | 0 |
| **ç¸½è¨ˆ** | **7** | **300+** | **55+** | **10+** |

---

## ğŸ‰ çµè«–

å°ˆæ¡ˆä¸»è¦–çª—åŠŸèƒ½å·²å®Œæ•´å¯¦ä½œä¸¦æ•´åˆè‡³ç³»çµ±ä¸­,æä¾›:

âœ… **æ¸…æ™°çš„è¦–è¦ºå±¤æ¬¡**: å››è‰²åˆ†å€è¨­è¨ˆ,æ¯å€‹å€åŸŸåŠŸèƒ½æ˜ç¢º  
âœ… **æµæš¢çš„äº’å‹•é«”é©—**: Hover æ•ˆæœã€é¸ä¸­ç‹€æ…‹ã€å¹³æ»‘åˆ‡æ›  
âœ… **å®Œæ•´çš„éŒ¯èª¤è™•ç†**: è¼‰å…¥ç‹€æ…‹ã€éŒ¯èª¤æç¤ºã€å®¹éŒ¯æ©Ÿåˆ¶  
âœ… **éŸ¿æ‡‰å¼è¨­è¨ˆ**: æ”¯æ´ä¸åŒè¢å¹•å°ºå¯¸  
âœ… **æ¨¡çµ„åŒ–æ¶æ§‹**: å…ƒä»¶å¯é‡ç”¨ã€æ˜“æ–¼ç¶­è­·  

æ­¤åŠŸèƒ½ç‚ºå°ˆæ¡ˆç®¡ç†ç³»çµ±å¥ å®šäº†å …å¯¦çš„åŸºç¤,å¾ŒçºŒå¯æŒçºŒæ“´å±•æ›´å¤šåŠŸèƒ½ã€‚

---

**æ›´æ–°è€…**: GitHub Copilot  
**å¯©æ ¸è€…**: å¾…å¯©æ ¸  
**ç‹€æ…‹**: âœ… å®Œæˆä¸¦å¯ç”¨
