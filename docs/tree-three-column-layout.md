# 樹狀圖 1:8:1 三欄布局

## 功能說明

將樹狀圖頁面改為 1:8:1 的三欄 Grid 布局，提供左側導覽區、中間主要內容區、右側工具面板，模仿首頁的布局風格。

## 布局結構

```
┌────────────────────────────────────────┐
│         工具列（橫跨三欄）              │
├──┬────────────────────────────────┬───┤
│左│      中間主要內容區              │右 │
│側│      (樹狀圖 ReactFlow)         │側 │
│導│                                 │工 │
│覽│                                 │具 │
│區│                                 │面 │
│  │                                 │板 │
│80px         8 等份 (1fr)         80px│
└──┴────────────────────────────────┴───┘
```

### Grid 配置

```css
grid-template-columns: 80px 1fr 80px;
grid-template-rows: auto 1fr;
```

- **第一列**：工具列（`grid-column: 1 / -1`）
- **第二列**：左側 + 中間 + 右側

## 區域說明

### 1. 工具列（頂部）
- 橫跨整個寬度
- 包含：返回首頁、標題、全部展開按鈕
- 背景：白色 (#fff)
- 固定高度，z-index: 10

### 2. 左側導覽區（80px）
- 淡紫色背景 `rgba(102, 126, 234, 0.05)`
- 右邊框分隔線
- 包含工具按鈕：
  - 🔍 過濾
  - 📚 圖層
  - 🔖 書籤

### 3. 中間主要內容區（1fr）
- 白色背景 (#ffffff)
- React Flow 樹狀圖顯示區域
- 佔據最大空間

### 4. 右側工具面板（80px）
- 淡綠色背景 `rgba(34, 197, 94, 0.05)`
- 左邊框分隔線
- 包含工具按鈕：
  - ⚙️ 設定
  - 💾 匯出
  - 🔗 分享

## 側邊欄工具按鈕

### 樣式
- 尺寸：48×48px
- 圓角：12px
- 白色背景，淡灰邊框
- Emoji 圖標（1.5rem）

### 交互效果
```css
hover: 
  - 背景變淡灰
  - 放大 1.05 倍
  - 陰影加深

active:
  - 漸層背景 (紫色)
  - 白色文字
  - 無邊框
```

## CSS 架構

### 主要類別

| 類別 | 用途 | Grid 位置 |
|------|------|----------|
| `.tree-diagram-container` | 容器 | - |
| `.tree-toolbar` | 工具列 | 1 / -1, row 1 |
| `.tree-sidebar-left` | 左側欄 | col 1, row 2 |
| `.tree-diagram-flow` | 中間區 | col 2, row 2 |
| `.tree-sidebar-right` | 右側欄 | col 3, row 2 |
| `.sidebar-tool-btn` | 工具按鈕 | - |

## 技術細節

### Grid 布局優勢
- ✅ 明確的區域劃分
- ✅ 響應式友好
- ✅ 易於維護和擴展
- ✅ 工具列自動橫跨全寬

### 顏色主題
- **左側**：淡紫色（呼應首頁導覽）
- **中間**：純白色（內容聚焦）
- **右側**：淡綠色（呼應樹狀圖主題）

### 邊框設計
- 左右側欄與中間區域用 1px 邊框分隔
- 工具列與主體用底部邊框分隔
- 統一使用 #e2e8f0 顏色

## 修改檔案

- `client/components/Tree/TreeDiagram.tsx` - 元件結構
- `client/components/Tree/TreeDiagram.css` - 布局與樣式

## 未來擴展

預留功能接口：
- 🔍 過濾：節點搜尋與篩選
- 📚 圖層：顯示/隱藏特定層級
- 🔖 書籤：快速跳轉到標記節點
- ⚙️ 設定：布局方向、節點樣式
- 💾 匯出：PNG、SVG、JSON 格式
- 🔗 分享：生成分享連結

## 視覺效果

```
    80px              中間最大              80px
  ┌──────┬───────────────────────────┬──────┐
  │ 🔍  │                           │  ⚙️  │
  │ 📚  │     [樹狀圖顯示區域]      │  💾  │
  │ 🔖  │                           │  🔗  │
  └──────┴───────────────────────────┴──────┘
  左側導覽        主要內容          右側工具
```

## 響應式考量

當前固定寬度（80px），未來可考慮：
- 平板：收窄至 60px
- 手機：側邊欄自動隱藏，改為浮動面板
- 大螢幕：可擴展至 100px
