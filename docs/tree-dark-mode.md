# 樹狀圖 Dark 模式

## 功能說明

將樹狀圖系統全面升級為 Dark 模式配色方案，提供更舒適的視覺體驗，特別適合長時間使用。

## Dark 模式配色方案

### 基礎色調

| 元素 | 顏色 | 說明 |
|------|------|------|
| 主背景 | `#0f172a` | 深藍灰（slate-900） |
| 次背景 | `#1e293b` | 中深藍灰（slate-800） |
| 工具列背景 | `#1e293b` | 中深藍灰 |
| 邊框 | `#334155` | 灰藍（slate-700） |
| 文字主色 | `#e2e8f0` | 淡灰藍（slate-200） |
| 文字標題 | `#f1f5f9` | 更淡灰藍（slate-100） |

### 節點配色（6 個層級）

每個深度使用深色背景 + 亮色邊框 + 淡色文字的組合：

| 層級 | 背景色 | 邊框色 | 文字色 | 主題 |
|------|--------|--------|--------|------|
| 0 (Root) | `#312e81` | `#818cf8` | `#c7d2fe` | 深靛藍 |
| 1 | `#164e63` | `#22d3ee` | `#a5f3fc` | 深青色 |
| 2 | `#14532d` | `#4ade80` | `#bbf7d0` | 深綠色 |
| 3 | `#7c2d12` | `#fb923c` | `#fed7aa` | 深橙色 |
| 4 | `#831843` | `#f472b6` | `#fbcfe8` | 深粉紅 |
| 5 | `#334155` | `#94a3b8` | `#cbd5e1` | 深灰藍 |

### 按鈕配色

| 按鈕 | 顏色 | Hover 背景 |
|------|------|-----------|
| 返回首頁 | `#818cf8` (淡靛藍) | `rgba(99, 102, 241, 0.2)` |
| 全部展開 | `#4ade80` (淡綠) | `rgba(34, 197, 94, 0.2)` |
| 側邊欄工具 | `#334155` | `#475569` |
| 工具列按鈕 | `#334155` | `#475569` |

### 側邊欄配色

| 區域 | 背景色 |
|------|--------|
| 左側導覽 | `rgba(99, 102, 241, 0.1)` 淡紫 |
| 右側工具 | `rgba(34, 197, 94, 0.1)` 淡綠 |

## 視覺增強

### 陰影效果
```css
/* 節點陰影 */
box-shadow: 0 2px 8px rgba(0,0,0,0.4);

/* Hover 陰影 */
box-shadow: 0 4px 16px rgba(0,0,0,0.6);

/* Root 節點陰影 */
box-shadow: 0 4px 16px rgba(129, 140, 248, 0.4);
```

### Hover 效果
- 節點 Hover：`filter: brightness(1.2)` 提升亮度
- 按鈕 Hover：背景色變亮
- 工具按鈕 Hover：`transform: scale(1.05)`

## 對比度優化

### 文字可讀性
- 主要文字：`#e2e8f0` (slate-200)
- 標題文字：`#f1f5f9` (slate-100)
- 次要文字：`#94a3b8` (slate-400)

### WCAG 標準
所有文字與背景的對比度均符合 WCAG AA 標準：
- 主要文字對比度 > 4.5:1
- 大標題對比度 > 3:1

## PSD 結構頁面 Dark 模式

### 屬性面板
- 背景：`#1e293b`
- 標題：`#f1f5f9`
- 標籤：`#94a3b8`
- 內容：`#e2e8f0`
- 邊框：`#334155`

## React Flow Dark 模式

### 背景設定
```css
.tree-diagram-flow .react-flow__background {
  background: #1e293b;
}

.tree-diagram-flow .react-flow__pane {
  background: #1e293b;
}
```

### 連線顏色
連線顏色由節點深度自動決定，使用 `depthPalette` 的邊框色。

## 修改檔案

1. **`client/components/Tree/TreeDiagram.tsx`**
   - 更新 `depthPalette` 為 dark 模式配色
   - 深色背景 + 亮色邊框組合

2. **`client/components/Tree/TreeDiagram.css`**
   - 主容器背景：`#0f172a`
   - 工具列背景：`#1e293b`
   - 側邊欄背景：半透明色
   - 按鈕樣式：深色背景 + 亮色文字
   - 節點陰影加深

3. **`client/components/Tree/TreePsdStructurePage.tsx`**
   - 外層容器背景：`#0f172a`
   - 屬性面板背景：`#1e293b`
   - 文字顏色更新
   - 邊框顏色更新

## 視覺對比

### Light 模式 vs Dark 模式

| 元素 | Light | Dark |
|------|-------|------|
| 主背景 | `#f7fafc` 淡灰 | `#0f172a` 深藍灰 |
| 節點背景 | 淡色系 | 深色系 |
| 節點文字 | 深色 | 淡色 |
| 邊框 | `#e2e8f0` | `#334155` |
| 陰影 | 0.08-0.15 alpha | 0.4-0.6 alpha |

## 使用體驗

### 優勢
✅ 減少眼睛疲勞（低對比度）  
✅ 節省螢幕能量（OLED 螢幕）  
✅ 更專業的視覺風格  
✅ 突出節點顏色標識  
✅ 適合暗光環境使用

### 色彩心理
- 🔵 深藍灰：專業、穩重、科技感
- 🟣 淡紫色：創意、智慧、優雅
- 🟢 淡綠色：成長、和諧、自然

## 技術細節

### CSS 變數考量
未來可考慮使用 CSS 變數實現主題切換：
```css
:root[data-theme="dark"] {
  --bg-primary: #0f172a;
  --bg-secondary: #1e293b;
  --text-primary: #e2e8f0;
  /* ... */
}
```

### 可訪問性
- 保持足夠對比度
- 支援鍵盤導航
- 支援螢幕閱讀器
- 顏色不是唯一區分方式（還有形狀、位置）

## 未來優化

- [ ] 實現 Light/Dark 主題切換
- [ ] 使用 CSS 變數管理配色
- [ ] 自動偵測系統主題偏好
- [ ] 記住使用者主題選擇
- [ ] 提供自訂配色方案
