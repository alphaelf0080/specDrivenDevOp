import { MindMapData } from '../types/mindmap';

const branchStyle = {
  borderColor: '#38a169',
  borderWidth: 2,
  backgroundColor: '#f0fff4',
  textColor: '#22543d',
  fontSize: 14,
  borderRadius: 12,
  padding: 16,
} as const;

const leafStyle = {
  borderColor: '#ed8936',
  borderWidth: 2,
  backgroundColor: '#fffaf0',
  textColor: '#7b341e',
  fontSize: 13,
  borderRadius: 10,
  padding: 14,
} as const;

const subBranchStyle = {
  borderColor: '#4299e1',
  borderWidth: 2,
  backgroundColor: '#ebf8ff',
  textColor: '#2c5282',
  fontSize: 13,
  borderRadius: 10,
  padding: 14,
} as const;

export const sddMindMapData: MindMapData = {
  title: 'Slot Game 規格驅動開發（SDD）方案',
  description: '以規格檔為中心的老虎機遊戲全生命週期開發方案',
  nodes: [
    {
      id: 'root',
      label: 'SDD 規格驅動開發',
      type: 'root',
      style: {
        backgroundColor: '#5b21b6',
        borderColor: '#4c1d95',
        textColor: '#ffffff',
        fontSize: 18,
        borderRadius: 16,
        padding: 20,
      },
      data: {
        description: 'Spec-Driven Development for Slot Games',
      },
    },
    // === 第一層：主要章節 ===
    {
      id: 'overview',
      label: '方案概述',
      type: 'branch',
      style: branchStyle,
    },
    {
      id: 'roles',
      label: '角色職責',
      type: 'branch',
      style: branchStyle,
    },
    {
      id: 'workflow',
      label: '開發流程',
      type: 'branch',
      style: branchStyle,
    },
    {
      id: 'techstack',
      label: '工具技術棧',
      type: 'branch',
      style: branchStyle,
    },
    {
      id: 'quality',
      label: '品質保證',
      type: 'branch',
      style: branchStyle,
    },
    {
      id: 'compliance',
      label: '監管合規',
      type: 'branch',
      style: branchStyle,
    },
    {
      id: 'roadmap',
      label: '實施路線圖',
      type: 'branch',
      style: branchStyle,
    },
    
    // === 方案概述 ===
    {
      id: 'overview-concept',
      label: '核心理念',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'overview-concept-1',
      label: '規格即真理來源',
      type: 'leaf',
      style: leafStyle,
      data: { description: 'JSON Schema 定義遊戲數學、視覺、邏輯' },
    },
    {
      id: 'overview-concept-2',
      label: '跨職能協同',
      type: 'leaf',
      style: leafStyle,
      data: { description: '美術/前端/後端/數值基於同一規格作業' },
    },
    {
      id: 'overview-goals',
      label: '方案目標',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'overview-goal-1',
      label: '縮短開發週期 -50%',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'overview-goal-2',
      label: '降低溝通成本 -80%',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'overview-goal-3',
      label: 'Bug 率降低 -67%',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'overview-goal-4',
      label: 'AI 友善結構化',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'overview-arch',
      label: '技術架構',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'overview-arch-1',
      label: '規格檔中心（JSON）',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'overview-arch-2',
      label: 'Schema 驗證器',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'overview-arch-3',
      label: '五大職能平行開發',
      type: 'leaf',
      style: leafStyle,
    },
    
    // === 角色職責 ===
    {
      id: 'role-math',
      label: '數值企劃',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'role-math-1',
      label: '設計 RTP/波動度',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-math-2',
      label: '制定賠付表',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-math-3',
      label: 'CLI 模擬驗證',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-math-4',
      label: 'AI 優化調參',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-art',
      label: '美術設計',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'role-art-1',
      label: '讀取規格資產清單',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-art-2',
      label: '產出符號/背景/音效',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-art-3',
      label: '資產命名驗證',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-fe',
      label: '前端工程師',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'role-fe-1',
      label: '載入規格與資產',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-fe-2',
      label: '渲染遊戲畫面',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-fe-3',
      label: 'Mock 模式獨立開發',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-be',
      label: '後端工程師',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'role-be-1',
      label: '實作 Spin API',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-be-2',
      label: '伺服器端 RNG',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-be-3',
      label: 'RTP 監控與告警',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-qa',
      label: '測試工程師',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'role-qa-1',
      label: '數學模型驗證',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-qa-2',
      label: 'E2E 整合測試',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-qa-3',
      label: '視覺回歸測試',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'role-qa-4',
      label: '壓力測試',
      type: 'leaf',
      style: leafStyle,
    },
    
    // === 開發流程 ===
    {
      id: 'workflow-startup',
      label: '專案啟動',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'workflow-startup-1',
      label: '需求 → 規格 v0.1',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'workflow-startup-2',
      label: '平行開發分配',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'workflow-daily',
      label: '日常開發',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'workflow-daily-1',
      label: 'Git 分支策略',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'workflow-daily-2',
      label: 'CI/CD 自動驗證',
      type: 'leaf',
      style: leafStyle,
    },
    
    // === 工具技術棧 ===
    {
      id: 'tech-core',
      label: '核心技術',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'tech-core-1',
      label: 'JSON + Zod Schema',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'tech-core-2',
      label: 'React/Vue + PixiJS',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'tech-core-3',
      label: 'Node.js Express',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'tech-core-4',
      label: 'PostgreSQL + Redis',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'tech-cli',
      label: 'CLI 工具',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'tech-cli-1',
      label: 'validate 驗證規格',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'tech-cli-2',
      label: 'simulate 模擬 RTP',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'tech-cli-3',
      label: 'optimize AI 調參',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'tech-cli-4',
      label: 'generate 生成程式碼',
      type: 'leaf',
      style: leafStyle,
    },
    
    // === 品質保證 ===
    {
      id: 'qa-math',
      label: '數學驗證',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'qa-math-1',
      label: 'RTP ±1% 範圍',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'qa-math-2',
      label: '波動度符合設計',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'qa-math-3',
      label: '最大贏分限制',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'qa-visual',
      label: '視覺一致性',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'qa-visual-1',
      label: 'Storybook 元件庫',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'qa-visual-2',
      label: 'Chromatic 截圖比對',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'qa-perf',
      label: '效能基準',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'qa-perf-1',
      label: '首屏 < 2 秒',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'qa-perf-2',
      label: '動畫 ≥ 60 FPS',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'qa-perf-3',
      label: 'API < 100ms (p95)',
      type: 'leaf',
      style: leafStyle,
    },
    
    // === 監管合規 ===
    {
      id: 'comp-docs',
      label: '必要文件',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'comp-docs-1',
      label: '數學報告 PAR Sheet',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'comp-docs-2',
      label: 'RNG 認證',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'comp-docs-3',
      label: '遊戲紀錄可追溯',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'comp-audit',
      label: '審計流程',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'comp-audit-1',
      label: '玩家可驗證機制',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'comp-audit-2',
      label: 'Seed 與結果儲存',
      type: 'leaf',
      style: leafStyle,
    },
    
    // === 實施路線圖 ===
    {
      id: 'roadmap-phase1',
      label: 'Phase 1 基礎建設',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'roadmap-phase1-1',
      label: '建立規格 Schema',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'roadmap-phase1-2',
      label: '開發核心引擎',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'roadmap-phase1-3',
      label: '實作 CLI 工具',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'roadmap-phase1-4',
      label: '建立 CI/CD',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'roadmap-phase2',
      label: 'Phase 2 首款遊戲',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'roadmap-phase2-1',
      label: '撰寫規格',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'roadmap-phase2-2',
      label: '美術資產產出',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'roadmap-phase2-3',
      label: '前後端實作',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'roadmap-phase2-4',
      label: '測試與上線',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'roadmap-phase3',
      label: 'Phase 3 平台化',
      type: 'branch',
      style: subBranchStyle,
    },
    {
      id: 'roadmap-phase3-1',
      label: '規格編輯器',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'roadmap-phase3-2',
      label: '資產管理平台',
      type: 'leaf',
      style: leafStyle,
    },
    {
      id: 'roadmap-phase3-3',
      label: 'A/B Testing 系統',
      type: 'leaf',
      style: leafStyle,
    },
  ],
  edges: [
    // 主要分支
    { id: 'e-root-overview', source: 'root', target: 'overview' },
    { id: 'e-root-roles', source: 'root', target: 'roles' },
    { id: 'e-root-workflow', source: 'root', target: 'workflow' },
    { id: 'e-root-techstack', source: 'root', target: 'techstack' },
    { id: 'e-root-quality', source: 'root', target: 'quality' },
    { id: 'e-root-compliance', source: 'root', target: 'compliance' },
    { id: 'e-root-roadmap', source: 'root', target: 'roadmap' },
    
    // 方案概述
    { id: 'e-overview-concept', source: 'overview', target: 'overview-concept' },
    { id: 'e-overview-concept-1', source: 'overview-concept', target: 'overview-concept-1' },
    { id: 'e-overview-concept-2', source: 'overview-concept', target: 'overview-concept-2' },
    { id: 'e-overview-goals', source: 'overview', target: 'overview-goals' },
    { id: 'e-overview-goal-1', source: 'overview-goals', target: 'overview-goal-1' },
    { id: 'e-overview-goal-2', source: 'overview-goals', target: 'overview-goal-2' },
    { id: 'e-overview-goal-3', source: 'overview-goals', target: 'overview-goal-3' },
    { id: 'e-overview-goal-4', source: 'overview-goals', target: 'overview-goal-4' },
    { id: 'e-overview-arch', source: 'overview', target: 'overview-arch' },
    { id: 'e-overview-arch-1', source: 'overview-arch', target: 'overview-arch-1' },
    { id: 'e-overview-arch-2', source: 'overview-arch', target: 'overview-arch-2' },
    { id: 'e-overview-arch-3', source: 'overview-arch', target: 'overview-arch-3' },
    
    // 角色職責
    { id: 'e-roles-math', source: 'roles', target: 'role-math' },
    { id: 'e-role-math-1', source: 'role-math', target: 'role-math-1' },
    { id: 'e-role-math-2', source: 'role-math', target: 'role-math-2' },
    { id: 'e-role-math-3', source: 'role-math', target: 'role-math-3' },
    { id: 'e-role-math-4', source: 'role-math', target: 'role-math-4' },
    { id: 'e-roles-art', source: 'roles', target: 'role-art' },
    { id: 'e-role-art-1', source: 'role-art', target: 'role-art-1' },
    { id: 'e-role-art-2', source: 'role-art', target: 'role-art-2' },
    { id: 'e-role-art-3', source: 'role-art', target: 'role-art-3' },
    { id: 'e-roles-fe', source: 'roles', target: 'role-fe' },
    { id: 'e-role-fe-1', source: 'role-fe', target: 'role-fe-1' },
    { id: 'e-role-fe-2', source: 'role-fe', target: 'role-fe-2' },
    { id: 'e-role-fe-3', source: 'role-fe', target: 'role-fe-3' },
    { id: 'e-roles-be', source: 'roles', target: 'role-be' },
    { id: 'e-role-be-1', source: 'role-be', target: 'role-be-1' },
    { id: 'e-role-be-2', source: 'role-be', target: 'role-be-2' },
    { id: 'e-role-be-3', source: 'role-be', target: 'role-be-3' },
    { id: 'e-roles-qa', source: 'roles', target: 'role-qa' },
    { id: 'e-role-qa-1', source: 'role-qa', target: 'role-qa-1' },
    { id: 'e-role-qa-2', source: 'role-qa', target: 'role-qa-2' },
    { id: 'e-role-qa-3', source: 'role-qa', target: 'role-qa-3' },
    { id: 'e-role-qa-4', source: 'role-qa', target: 'role-qa-4' },
    
    // 開發流程
    { id: 'e-workflow-startup', source: 'workflow', target: 'workflow-startup' },
    { id: 'e-workflow-startup-1', source: 'workflow-startup', target: 'workflow-startup-1' },
    { id: 'e-workflow-startup-2', source: 'workflow-startup', target: 'workflow-startup-2' },
    { id: 'e-workflow-daily', source: 'workflow', target: 'workflow-daily' },
    { id: 'e-workflow-daily-1', source: 'workflow-daily', target: 'workflow-daily-1' },
    { id: 'e-workflow-daily-2', source: 'workflow-daily', target: 'workflow-daily-2' },
    
    // 工具技術棧
    { id: 'e-tech-core', source: 'techstack', target: 'tech-core' },
    { id: 'e-tech-core-1', source: 'tech-core', target: 'tech-core-1' },
    { id: 'e-tech-core-2', source: 'tech-core', target: 'tech-core-2' },
    { id: 'e-tech-core-3', source: 'tech-core', target: 'tech-core-3' },
    { id: 'e-tech-core-4', source: 'tech-core', target: 'tech-core-4' },
    { id: 'e-tech-cli', source: 'techstack', target: 'tech-cli' },
    { id: 'e-tech-cli-1', source: 'tech-cli', target: 'tech-cli-1' },
    { id: 'e-tech-cli-2', source: 'tech-cli', target: 'tech-cli-2' },
    { id: 'e-tech-cli-3', source: 'tech-cli', target: 'tech-cli-3' },
    { id: 'e-tech-cli-4', source: 'tech-cli', target: 'tech-cli-4' },
    
    // 品質保證
    { id: 'e-qa-math', source: 'quality', target: 'qa-math' },
    { id: 'e-qa-math-1', source: 'qa-math', target: 'qa-math-1' },
    { id: 'e-qa-math-2', source: 'qa-math', target: 'qa-math-2' },
    { id: 'e-qa-math-3', source: 'qa-math', target: 'qa-math-3' },
    { id: 'e-qa-visual', source: 'quality', target: 'qa-visual' },
    { id: 'e-qa-visual-1', source: 'qa-visual', target: 'qa-visual-1' },
    { id: 'e-qa-visual-2', source: 'qa-visual', target: 'qa-visual-2' },
    { id: 'e-qa-perf', source: 'quality', target: 'qa-perf' },
    { id: 'e-qa-perf-1', source: 'qa-perf', target: 'qa-perf-1' },
    { id: 'e-qa-perf-2', source: 'qa-perf', target: 'qa-perf-2' },
    { id: 'e-qa-perf-3', source: 'qa-perf', target: 'qa-perf-3' },
    
    // 監管合規
    { id: 'e-comp-docs', source: 'compliance', target: 'comp-docs' },
    { id: 'e-comp-docs-1', source: 'comp-docs', target: 'comp-docs-1' },
    { id: 'e-comp-docs-2', source: 'comp-docs', target: 'comp-docs-2' },
    { id: 'e-comp-docs-3', source: 'comp-docs', target: 'comp-docs-3' },
    { id: 'e-comp-audit', source: 'compliance', target: 'comp-audit' },
    { id: 'e-comp-audit-1', source: 'comp-audit', target: 'comp-audit-1' },
    { id: 'e-comp-audit-2', source: 'comp-audit', target: 'comp-audit-2' },
    
    // 實施路線圖
    { id: 'e-roadmap-phase1', source: 'roadmap', target: 'roadmap-phase1' },
    { id: 'e-roadmap-phase1-1', source: 'roadmap-phase1', target: 'roadmap-phase1-1' },
    { id: 'e-roadmap-phase1-2', source: 'roadmap-phase1', target: 'roadmap-phase1-2' },
    { id: 'e-roadmap-phase1-3', source: 'roadmap-phase1', target: 'roadmap-phase1-3' },
    { id: 'e-roadmap-phase1-4', source: 'roadmap-phase1', target: 'roadmap-phase1-4' },
    { id: 'e-roadmap-phase2', source: 'roadmap', target: 'roadmap-phase2' },
    { id: 'e-roadmap-phase2-1', source: 'roadmap-phase2', target: 'roadmap-phase2-1' },
    { id: 'e-roadmap-phase2-2', source: 'roadmap-phase2', target: 'roadmap-phase2-2' },
    { id: 'e-roadmap-phase2-3', source: 'roadmap-phase2', target: 'roadmap-phase2-3' },
    { id: 'e-roadmap-phase2-4', source: 'roadmap-phase2', target: 'roadmap-phase2-4' },
    { id: 'e-roadmap-phase3', source: 'roadmap', target: 'roadmap-phase3' },
    { id: 'e-roadmap-phase3-1', source: 'roadmap-phase3', target: 'roadmap-phase3-1' },
    { id: 'e-roadmap-phase3-2', source: 'roadmap-phase3', target: 'roadmap-phase3-2' },
    { id: 'e-roadmap-phase3-3', source: 'roadmap-phase3', target: 'roadmap-phase3-3' },
  ],
};

export default sddMindMapData;
